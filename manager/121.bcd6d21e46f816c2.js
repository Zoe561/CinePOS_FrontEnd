"use strict";(self.webpackChunkmanager=self.webpackChunkmanager||[]).push([[121],{5121:(Kt,Z,l)=>{l.r(Z),l.d(Z,{TheaterPageModule:()=>Ht});var u=l(6895),c=l(4006),h=l(3456),d=l(8526),E=l(2721),t=l(4650),P=l(3227),L=l(2843),f=l(9300),_=l(262),S=l(529),Q=l(3796),T=(()=>{return(n=T||(T={}))[n.success=1]="success",n[n.systemError=-1]="systemError",T;var n})();let v=(()=>{class n{constructor(e){this.http=e,this.isPopupInvalidMsg=!1,this.handleResponse=o=>{let a=!0;return o.code!==T.success&&(a=!1,!this.isPopupInvalidMsg&&o.message&&(this.isPopupInvalidMsg=!0,alert(o.message),setTimeout(()=>{this.isPopupInvalidMsg=!1}))),a},this.handleError=o=>(console.log("handleError"),o.error instanceof ErrorEvent?console.error("An error occurred:",o.error.message):console.error(`Backend returned code ${o.status}, body was: ${o.error}`),this.isPopupInvalidMsg||(this.isPopupInvalidMsg=!0,alert("\u7cfb\u7d71\u767c\u751f\u554f\u984c")),(0,L._)("Something bad happened; please try again later."))}getTheaterList(e,o,a,i,s,p,zt){return this.request("get",{name:e,floor:o,type:a,capacityFrom:i,capacityTo:s,withDisabled:p,status:zt},"theater/list")}getTheaterInfo(e){return this.request("get",{},`theater/${e}`)}createTheater(e){return this.request("post",e,"theater")}updateTheater(e,o){return this.request("patch",o,`theater/${e}`)}updateStatus(e,o){return this.request("patch",o,`theater/${e}/onoffline`)}deleteTheater(e){return this.request("delete",{},`theater/${e}`)}request(e,o,a){const i=this.getHTTPHeaders(),s=Q.N.cinePosApi+"/v1/manager/"+a;switch(e){case"get":default:return this.http.get(s,{headers:i,params:o}).pipe((0,f.h)(this.handleResponse),(0,_.K)(this.handleError));case"delete":return this.http.delete(s,{headers:i,params:o}).pipe((0,f.h)(this.handleResponse),(0,_.K)(this.handleError));case"post":return this.http.post(s,o,{headers:i}).pipe((0,f.h)(this.handleResponse),(0,_.K)(this.handleError));case"patch":return this.http.patch(s,o,{headers:i}).pipe((0,f.h)(this.handleResponse),(0,_.K)(this.handleError));case"put":return this.http.put(s,o,{headers:i}).pipe((0,f.h)(this.handleResponse),(0,_.K)(this.handleError))}}getHTTPHeaders(){return new S.WM({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("token")})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var k=l(7392),x=l(1948),b=l(9549),M=l(4385),C=l(3238),F=l(1281);let B=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=(0,F.Ig)(e)}get inset(){return this._inset}set inset(e){this._inset=(0,F.Ig)(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,o){2&e&&(t.uIk("aria-orientation",o.vertical?"vertical":"horizontal"),t.ekj("mat-divider-vertical",o.vertical)("mat-divider-horizontal",!o.vertical)("mat-divider-inset",o.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,o){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),n})(),G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.BQ,C.BQ]}),n})();var y=l(4859),I=l(7974),O=l(6064),A=l(8302),D=l(6599),Y=l(6459);function V(n,r){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(null==e?null:e.name)}}function R(n,r){1&n&&(t.TgZ(0,"p",32),t._uU(1,"\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u8cc7\u6599\uff01"),t.qZA())}function H(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.updateStatus(!0,a._id))}),t._UZ(1,"mat-icon",47),t.TgZ(2,"span"),t._uU(3," \u767c\u4f48"),t.qZA()()}}function z(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",34),t._uU(2),t.qZA(),t.TgZ(3,"td",35),t._uU(4),t.qZA(),t.TgZ(5,"td",36),t._uU(6),t.qZA(),t.TgZ(7,"td",37),t._uU(8),t.qZA(),t.TgZ(9,"td",38),t._uU(10),t.qZA(),t.TgZ(11,"td",39),t._uU(12),t.qZA(),t.TgZ(13,"td",40)(14,"div",41)(15,"button",42),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.openDetailPage(i._id))}),t._UZ(16,"mat-icon",43),t.TgZ(17,"span"),t._uU(18," \u6aa2\u8996"),t.qZA()(),t.TgZ(19,"button",42),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.openEditPage(i._id))}),t._UZ(20,"mat-icon",44),t.TgZ(21,"span"),t._uU(22," \u7de8\u8f2f"),t.qZA()(),t.TgZ(23,"button",42),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.deleteTheater(i._id))}),t._UZ(24,"mat-icon",45),t.TgZ(25,"span"),t._uU(26," \u522a\u9664"),t.qZA()(),t.YNc(27,H,4,0,"button",46),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.floor+"F"),t.xp6(2),t.Oqu(e.type),t.xp6(2),t.Oqu(e.totalCapacity),t.xp6(2),t.Oqu(e.wheelChairCapacity||"-"),t.xp6(2),t.Oqu(1===e.status?"\u5df2\u767c\u4f48":"\u66ab\u5b58"),t.xp6(15),t.Q6J("ngIf",0===e.status)}}function j(n,r){if(1&n&&(t.TgZ(0,"cine-table")(1,"thead")(2,"tr")(3,"th"),t._uU(4,"\u540d\u7a31"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"\u6a13\u5c64"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"\u985e\u578b"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"\u5e2d\u6b21"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"\u8f2a\u6905\u5e2d\u6b21"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"\u72c0\u614b"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"\u529f\u80fd"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,z,28,7,"tr",33),t.qZA()()),2&n){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.theaterListView)}}let U=(()=>{class n{constructor(e,o,a,i){this.router=e,this.commonAPIService=o,this.theaterService=a,this.changeDetectorRef=i,this.theaterListView=[],this.pageSet1=new E.n,this.typeOptions=[],this.theaterListApiData=[]}get theaterName(){return this.formGroup.get("theaterName")}get floor(){return this.formGroup.get("floor")}get theaterType(){return this.formGroup.get("theaterType")}get capacityFrom(){return this.formGroup.get("capacityFrom")}get capacityTo(){return this.formGroup.get("capacityTo")}get withDisabled(){return this.formGroup.get("withDisabled")}get status(){return this.formGroup.get("status")}ngOnInit(){this.initForm(),this.getOptionAPI(2),this.search()}initForm(){this.formGroup=new c.cw({theaterName:new c.NI(""),floor:new c.NI(""),theaterType:new c.NI(""),capacityFrom:new c.NI(""),capacityTo:new c.NI(""),withDisabled:new c.NI(""),status:new c.NI("")})}search(){if(this.formGroup.setErrors(null),this.formGroup.valid){let e=this.getSearchCondition();this.getListAPI(e)}else this.formGroup.markAllAsTouched(),alert("\u8acb\u6aa2\u67e5\u6b04\u4f4d\u662f\u5426\u6b63\u78ba\u586b\u5beb\uff01")}getSearchCondition(){return{name:this.theaterName?.value,floor:this.floor?.value,type:Array.isArray(this.theaterType.value)&&this.theaterType.value.length>0?this.theaterType.value.join(","):"",capacityFrom:this.capacityFrom?.value&&null!=this.capacityFrom?.value?this.capacityFrom?.value:"",capacityTo:this.capacityTo?.value&&null!=this.capacityTo?.value?this.capacityTo?.value:"",withDisabled:this.withDisabled?.value,status:this.status?.value}}selectAll(){const e=this.typeOptions.map(o=>o.value);this.formGroup.get("theaterType")?.setValue(e)}clearAll(){this.formGroup.get("theaterType")?.setValue([])}clearSelection(){this.formGroup.get("floor")?.setValue("")}handlePageEvent(e){console.log(e),this.pageSet1.currentPage=e.pageIndex+1,this.theaterListView=this.pageSet1.slicePage(this.theaterListApiData,this.pageSet1.currentPage,this.pageSet1.currentPageSize),this.changeDetectorRef.detectChanges()}openDetailPage(e){this.router.navigate([d.F.THEATER,e])}openEditPage(e){this.router.navigate([d.F.THEATER,d.F.DETAIL,d.F.EDIT,e])}deleteTheater(e){this.theaterService.deleteTheater(e).subscribe(o=>{console.log("\u522a\u9664\u5f71\u5ef3-\u6210\u529fres",o),alert("\u522a\u9664\u5f71\u5ef3-\u6210\u529f"),this.getListAPI(this.getSearchCondition())})}updateStatus(e,o){this.theaterService.updateStatus(o,{status:e?1:0}).subscribe(p=>{console.log("\u66f4\u65b0\u4e0a\u67b6\u72c0\u614b-\u6210\u529fres",p),alert("\u66f4\u65b0\u4e0a\u67b6\u72c0\u614b-\u6210\u529f"),this.getListAPI(this.getSearchCondition())})}getOptionAPI(e){this.commonAPIService.getOption(e).subscribe(o=>{console.log(e,"\u53d6\u5f97\u9078\u9805\u8cc7\u6599-\u6210\u529fres",o),this.typeOptions=o.data,this.changeDetectorRef.detectChanges()})}getListAPI(e){this.theaterService.getTheaterList(e.name,e.floor,e.type,e.capacityFrom,e.capacityTo,e.withDisabled,e.status).subscribe(o=>{console.log("\u53d6\u5f97\u5217\u8868\u8cc7\u6599-\u6210\u529fres",o),this.theaterListApiData=o.data,this.theaterListView=this.pageSet1.slicePage(this.theaterListApiData,this.pageSet1.currentPage,this.pageSet1.currentPageSize),this.pageSet1.initialize(this.theaterListApiData.length),this.changeDetectorRef.detectChanges()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.F0),t.Y36(P.a),t.Y36(v),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-theater-list-page"]],decls:91,vars:16,consts:[[1,"w-full","px-[20px]"],[1,"wrapper-page","form-common-back","utility-common-back",3,"formGroup"],[1,"mb-[30px]"],[1,"row"],[1,"form-title"],[1,"form-content"],["type","text","formControlName","theaterName",1,"form-input","w-[300px]"],[1,"form-select","select-small"],["appearance","fill",1,"w-[300px]"],["formControlName","floor"],[3,"value"],[1,"etc-select-action"],["mat-button","",1,"etc-select-action-button",3,"click"],["fontIcon","remove_circle_outline"],[1,"form-select"],["placeholder","\u8acb\u9078\u64c7","formControlName","theaterType","multiple",""],[3,"value",4,"ngFor","ngForOf"],["fontIcon","check_box_outline"],["fontIcon","check_box_outline_blank"],["type","number","formControlName","capacityFrom",1,"form-input","w-[150px]"],["type","number","formControlName","capacityTo",1,"form-input","w-[150px]"],[1,"form-content",2,"display","flex"],[1,"form-radio","list-row","text-[12px]"],["aria-label","Select an option","formControlName","withDisabled"],[1,"mr-[25px]",3,"value"],["aria-label","Select an option","formControlName","status"],[1,"flex",2,"justify-content","right"],["mat-raised-button","","color","primary","type","submit",3,"click"],["class","p-50 text-center",4,"ngIf"],[4,"ngIf"],["aria-label","Select page",1,"demo-paginator",3,"length","pageSize","showFirstLastButtons","pageIndex","page"],["paginator",""],[1,"p-50","text-center"],[4,"ngFor","ngForOf"],["data-title","\u540d\u7a31"],["data-title","\u6a13\u5c64"],["data-title","\u985e\u578b"],["data-title","\u5e2d\u6b21"],["data-title","\u8f2a\u6905\u5e2d\u6b21"],["data-title","\u72c0\u614b"],["data-title","\u529f\u80fd",1,"w-[300px]"],[1,"button-container"],["mat-button","",1,"left-aligned-button",3,"click"],["fontIcon","remove_red_eye"],["fontIcon","edit"],["fontIcon","delete"],["mat-button","","class","left-aligned-button",3,"click",4,"ngIf"],["fontIcon","publish"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"cine-card",2)(3,"cine-card-header"),t._uU(4,"\u67e5\u8a62\u689d\u4ef6"),t.qZA(),t.TgZ(5,"cine-card-content")(6,"div",3)(7,"span",4),t._uU(8,"\u540d\u7a31"),t.qZA(),t.TgZ(9,"div",5),t._UZ(10,"input",6),t.qZA(),t.TgZ(11,"span",4),t._uU(12,"\u6a13\u5c64"),t.qZA(),t.TgZ(13,"div",5)(14,"div",7)(15,"mat-form-field",8)(16,"mat-label"),t._uU(17,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(18,"mat-select",9)(19,"mat-option",10),t._uU(20,"1F"),t.qZA(),t.TgZ(21,"mat-option",10),t._uU(22,"2F"),t.qZA(),t.TgZ(23,"mat-option",10),t._uU(24,"3F"),t.qZA(),t.TgZ(25,"mat-option",10),t._uU(26,"4F"),t.qZA(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",11)(29,"button",12),t.NdJ("click",function(){return o.clearSelection()}),t._UZ(30,"mat-icon",13),t.TgZ(31,"span"),t._uU(32," \u6e05\u9664"),t.qZA()()()()()()()(),t.TgZ(33,"div",3)(34,"span",4),t._uU(35,"\u985e\u578b"),t.qZA(),t.TgZ(36,"div",5)(37,"div",14)(38,"mat-form-field",8)(39,"mat-label"),t._uU(40,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(41,"mat-select",15),t.YNc(42,V,2,2,"mat-option",16),t._UZ(43,"mat-divider"),t.TgZ(44,"div",11)(45,"button",12),t.NdJ("click",function(){return o.selectAll()}),t._UZ(46,"mat-icon",17),t.TgZ(47,"span"),t._uU(48," \u5168\u9078"),t.qZA()(),t.TgZ(49,"button",12),t.NdJ("click",function(){return o.clearAll()}),t._UZ(50,"mat-icon",18),t.TgZ(51,"span"),t._uU(52," \u5168\u4e0d\u9078"),t.qZA()()()()()()(),t.TgZ(53,"span",4),t._uU(54,"\u5e2d\u6b21"),t.qZA(),t.TgZ(55,"div",5),t._UZ(56,"input",19),t._uU(57," \uff5e "),t._UZ(58,"input",20),t.qZA()(),t.TgZ(59,"div",3)(60,"span",4),t._uU(61,"\u6b98\u969c\u5ea7\u4f4d"),t.qZA(),t.TgZ(62,"div",21)(63,"div",22)(64,"mat-radio-group",23)(65,"mat-radio-button",24),t._uU(66,"\u6709"),t.qZA(),t.TgZ(67,"mat-radio-button",24),t._uU(68,"\u7121"),t.qZA()()()(),t.TgZ(69,"span",4),t._uU(70,"\u72c0\u614b"),t.qZA(),t.TgZ(71,"div",21)(72,"div",22)(73,"mat-radio-group",25)(74,"mat-radio-button",24),t._uU(75,"\u5df2\u767c\u4f48"),t.qZA(),t.TgZ(76,"mat-radio-button",24),t._uU(77,"\u66ab\u5b58"),t.qZA()()()()(),t.TgZ(78,"div",26)(79,"button",27),t.NdJ("click",function(){return o.search()}),t._uU(80,"\u67e5\u8a62"),t.qZA()()()(),t.TgZ(81,"cine-card")(82,"cine-card-header"),t._uU(83,"\u67e5\u8a62\u7d50\u679c"),t.qZA(),t.TgZ(84,"cine-card-content"),t.YNc(85,R,2,0,"p",28),t.YNc(86,j,19,1,"cine-table",29),t.TgZ(87,"mat-paginator",30,31),t.NdJ("page",function(i){return o.handlePageEvent(i)}),t.qZA()()(),t.TgZ(89,"span"),t._uU(90,"\xa0"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.formGroup),t.xp6(18),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4),t.xp6(17),t.Q6J("ngForOf",o.typeOptions),t.xp6(23),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0),t.xp6(7),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0),t.xp6(9),t.Q6J("ngIf",!(null!=o.theaterListView&&o.theaterListView.length)),t.xp6(1),t.Q6J("ngIf",null==o.theaterListView?null:o.theaterListView.length),t.xp6(1),t.Q6J("length",o.pageSet1.totalCounts)("pageSize",o.pageSet1.currentPageSize)("showFirstLastButtons",!0)("pageIndex",o.pageSet1.currentPage-1))},dependencies:[u.sg,u.O5,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,k.Hw,x.VQ,x.U0,b.KE,b.hX,M.gD,C.ey,B,y.lW,I.NW,O.A,A.g,D.n,Y.a],styles:[".form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:20px}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{width:20%;font-weight:400;font-size:13px;color:#ddd}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{width:80%;min-height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{height:48px;padding:16px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-input.input-textarea[_ngcontent-%COMP%]{height:200px!important;width:100%!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field{font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex{padding:16px 12px!important;padding-bottom:12px;border-radius:16px!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0;border-top:0}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select-arrow-wrapper{margin-top:10px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrappe{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted.mat-form-field-empty.mat-empty{display:inline-block!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container{height:15px;width:15px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle, .utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{border-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle{height:15px;width:15px;border-width:1px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{height:15px;width:15px;background-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio.list-row[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:row;align-items:center}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]   .list-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.utility-common-back[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{border-top:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{border-top:0!important;display:flex;align-items:center;height:48px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0 12px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{margin-right:5px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-underline, .utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-subscript-wrapper{display:none}.utility-common-back[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:6px 12px;letter-spacing:.1em;text-align:center;font-weight:500;font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .btn.gray[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);color:#ffffff80}.utility-common-back[_ngcontent-%COMP%]   .btn.small[_ngcontent-%COMP%]{border-radius:4px;height:30px}.utility-common-back[_ngcontent-%COMP%]   .btn.medium[_ngcontent-%COMP%]{border-radius:6px;height:42px}.etc-select-action[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.etc-select-action-button[_ngcontent-%COMP%]{font-size:12px;flex:1}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.left-aligned-button[_ngcontent-%COMP%]{font-size:12px}"]}),n})();var g=(()=>{return(n=g||(g={}))[n.createMap=0]="createMap",n[n.seatMapSetting=1]="seatMapSetting",n[n.rank=2]="rank",n[n.seatTypeSetting=3]="seatTypeSetting",g;var n})(),w=l(5412);let K=(()=>{class n{constructor(e){this.dialogRef=e}ngOnInit(){}chooseType(e){this.dialogRef.close(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-select-seat-type-dialog"]],decls:17,vars:0,consts:[[1,"text-center"],[1,"my-4"],[1,"text-lg"],[1,"dialog-content","mt-10"],["mat-dialog-close","",1,"dialog-button",3,"click"],["src","assets/images/icon/seat-wheelchair.svg","alt","handicapped",1,"h-full","mx-auto"],[1,"button-text"],["src","assets/images/icon/seat-no.svg","alt","no"],["src","assets/images/icon/seat-default.svg","alt","default"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3,"\u9078\u64c7\u7279\u6b8a\u5ea7\u4f4d\u985e\u578b"),t.qZA()(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return o.chooseType("1")}),t._UZ(6,"img",5),t.TgZ(7,"div",6),t._uU(8,"\u8f2a\u6905\u4f4d"),t.qZA()(),t.TgZ(9,"button",4),t.NdJ("click",function(){return o.chooseType("-1")}),t._UZ(10,"img",7),t.TgZ(11,"div",6),t._uU(12,"\u6545\u969c"),t.qZA()(),t.TgZ(13,"button",4),t.NdJ("click",function(){return o.chooseType("0")}),t._UZ(14,"img",8),t.TgZ(15,"div",6),t._uU(16,"\u9810\u8a2d\u503c"),t.qZA()()()())},dependencies:[w.ZT],styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px}.dialog-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.button-text[_ngcontent-%COMP%]{margin-top:8px;font-size:12px}"]}),n})();var m=(()=>{return(n=m||(m={}))[n.showOrNot=0]="showOrNot",n[n.seatType=1]="seatType",n[n.disable=2]="disable",m;var n})();function $(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t._UZ(1,"img",7),t.qZA()}}function X(n,r){1&n&&(t.TgZ(0,"div",8),t._UZ(1,"img",7),t.qZA())}function W(n,r){1&n&&(t.TgZ(0,"div",9),t._UZ(1,"img",7),t.qZA())}function tt(n,r){if(1&n&&(t.ynx(0),t.YNc(1,$,2,0,"div",3),t.YNc(2,X,2,0,"div",4),t.YNc(3,W,2,0,"div",5),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",2!=e.seatSetting&&4!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",2===e.seatSetting),t.xp6(1),t.Q6J("ngIf",4===e.seatSetting)}}function et(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t._UZ(1,"img",10),t.qZA()}}function nt(n,r){1&n&&(t.TgZ(0,"div",8),t._UZ(1,"img",10),t.qZA())}function ot(n,r){1&n&&(t.TgZ(0,"div",9),t._UZ(1,"img",10),t.qZA())}function at(n,r){if(1&n&&(t.ynx(0),t.YNc(1,et,2,0,"div",3),t.YNc(2,nt,2,0,"div",4),t.YNc(3,ot,2,0,"div",5),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",2!=e.seatSetting&&4!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",2===e.seatSetting),t.xp6(1),t.Q6J("ngIf",4===e.seatSetting)}}function rt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t.qZA()}}function it(n,r){1&n&&t._UZ(0,"div",14)}function st(n,r){if(1&n&&(t.ynx(0),t.YNc(1,rt,1,0,"div",11),t.YNc(2,it,1,0,"div",12),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",1===e.seatSetting)}}function ct(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t.qZA()}}function lt(n,r){1&n&&t._UZ(0,"div",8)}function pt(n,r){1&n&&t._UZ(0,"div",9)}function gt(n,r){if(1&n&&(t.ynx(0),t.YNc(1,ct,1,0,"div",3),t.YNc(2,lt,1,0,"div",4),t.YNc(3,pt,1,0,"div",5),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",2!=e.seatSetting&&4!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",2===e.seatSetting),t.xp6(1),t.Q6J("ngIf",4===e.seatSetting)}}let q=(()=>{class n{constructor(e){this.dialog=e,this.seatIndex=0,this.showType="0",this.activeOut=new t.vpe,this.type="0"}ngOnInit(){this.type=this.showType}active(){switch(this.seatSetting){case m.showOrNot:this.type="0"===this.type?"N":"0",this.activeOut.emit({seatIndex:this.seatIndex,type:this.type});break;case m.seatType:this.dialog.open(K,{width:"50%",height:"28%"}).afterClosed().subscribe(o=>{this.type=o||this.type,this.activeOut.emit({seatIndex:this.seatIndex,type:this.type})})}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-manager-seatchart-seat"]],inputs:{seatIndex:"seatIndex",showType:"showType",seatSetting:"seatSetting"},outputs:{activeOut:"activeOut"},decls:5,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","seat seat-free",3,"click",4,"ngIf"],["class","seat seat-sold",4,"ngIf"],["class","seat seat-free-show",4,"ngIf"],[1,"seat","seat-free",3,"click"],["src","assets/images/icon/no.svg","alt","no",1,"h-full","mx-auto"],[1,"seat","seat-sold"],[1,"seat","seat-free-show"],["src","assets/images/icon/handicapped.png","alt","handicapped",1,"h-full","mx-auto"],["class","seat seat-none",3,"click",4,"ngIf"],["class","seat seat-none",4,"ngIf"],[1,"seat","seat-none",3,"click"],[1,"seat","seat-none"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,tt,4,3,"ng-container",1),t.YNc(2,at,4,3,"ng-container",1),t.YNc(3,st,3,2,"ng-container",1),t.YNc(4,gt,4,3,"ng-container",2),t.qZA()),2&e&&(t.Q6J("ngSwitch",o.type),t.xp6(1),t.Q6J("ngSwitchCase","-1"),t.xp6(1),t.Q6J("ngSwitchCase","1"),t.xp6(1),t.Q6J("ngSwitchCase","N"))},dependencies:[u.O5,u.RF,u.n9,u.ED],styles:[".seat[_ngcontent-%COMP%]{height:1.75rem;width:100%;border-radius:.5rem .5rem .375rem .375rem;padding:.25rem}.seat-free[_ngcontent-%COMP%]{cursor:pointer;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.seat-free[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(148 163 184 / var(--tw-bg-opacity))}.seat-free-show[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.seat-lock[_ngcontent-%COMP%], .seat-sold[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity))}.seat-none[_ngcontent-%COMP%]{background-color:transparent}.active-seat[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity))}.step1-none[_ngcontent-%COMP%]{cursor:pointer;border-width:1px;--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity))}.step1-none[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}"]}),n})();function ut(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",12)(1,"input",13),t.NdJ("input",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.convertToUpperCase())})("ngModelChange",function(a){const s=t.CHM(e).index,p=t.oxw(2);return t.KtG(p.rowsOrder[s]=a)})("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&n){const e=r.$implicit,o=r.index,a=t.oxw(2);t.xp6(1),t.s9C("value",e),t.Q6J("disabled",a.step!==a.Step.rank)("ngModel",a.rowsOrder[o])}}function mt(n,r){if(1&n&&(t.TgZ(0,"ul"),t.YNc(1,ut,2,3,"li",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.rowsOrder)("ngForTrackBy",e.trackByIndex)}}function dt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",17)(1,"app-manager-seatchart-seat",18),t.NdJ("activeOut",function(a){t.CHM(e);const i=t.oxw(3);return t.KtG(i.activeOut(a))}),t.qZA()()}if(2&n){const e=r.index,o=t.oxw().index,a=t.oxw(2);t.xp6(1),t.Q6J("seatIndex",o*a.colsArr.length+e)("seatSetting",a.seatSetting)("showType",a.responseArr[o*a.colsArr.length+e])}}function ht(n,r){if(1&n&&(t.TgZ(0,"li")(1,"ul",15),t.YNc(2,dt,2,3,"li",16),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.colsArr)}}function ft(n,r){if(1&n&&(t.TgZ(0,"ul",9),t.YNc(1,ht,3,1,"li",14),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.rowsArr)}}function _t(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"input",21,22),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).index,p=t.oxw(2);return t.KtG(p.colsOrder[s]=a)})("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&n){const e=r.$implicit,o=r.index,a=t.oxw(2);t.xp6(1),t.s9C("value",e),t.Q6J("disabled",a.step!==a.Step.rank)("ngModel",a.colsOrder[o])}}function xt(n,r){if(1&n&&(t.TgZ(0,"ul",19),t.YNc(1,_t,3,3,"li",20),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.colsOrder)("ngForTrackBy",e.trackByIndex)}}let J=(()=>{class n{constructor(e){this.fb=e,this.Step=g,this.responseArr=[],this.rowsArr=[],this.colsArr=[],this.rowsOrder=[],this.colsOrder=[],this.lastType=!0,this.type=!0,this.step=g.createMap,this.fg=new t.vpe}ngOnInit(){this.validateForm=this.fb.group({seatMap:[],rowLabel:[],colLabel:[]}),this.fg.emit(this.validateForm)}setSeatChart(e,o,a){this.rowsArr=Array(o.length).fill("0"),this.colsArr=Array(a.length).fill("0"),this.responseArr=e,this.rowsOrder=o,this.colsOrder=a,this.validateForm.get("seatMap")?.patchValue(this.responseArr),this.validateForm.get("rowLabel")?.patchValue(this.rowsOrder),this.validateForm.get("colLabel")?.patchValue(this.colsOrder)}seatChartGenerator(e,o,a){console.log("seatChartGenerator"),this.responseArr=Array(o*e).fill("0"),this.rowsArr=Array(o).fill("0"),this.colsArr=Array(e).fill("0"),this.type=a,this.rowsOrder=this.createRowsOrder(o,a),this.colsOrder=this.createRowsOrder(e,!1),this.validateForm.get("seatMap")?.patchValue(this.responseArr),this.validateForm.get("rowLabel")?.patchValue(this.rowsOrder),this.validateForm.get("colLabel")?.patchValue(this.colsOrder)}setSeatSettingType(e){this.seatSetting=e}activeOut(e){this.responseArr[e.seatIndex]=e.type,console.log(e.seatIndex),console.log(this.responseArr),this.validateForm.get("seatMap")?.patchValue(this.responseArr),this.validateForm.get("rowLabel")?.patchValue(this.rowsOrder),this.validateForm.get("colLabel")?.patchValue(this.colsOrder)}trackByIndex(e,o){return e}convertToUpperCase(){for(let e=0;e<this.rowsOrder.length;e++)this.rowsOrder[e]=this.rowsOrder[e].toUpperCase()}selectAllText(){document.activeElement instanceof HTMLInputElement&&document.activeElement.select()}createRowsOrder(e,o){const a=[],i="A".charCodeAt(0);for(let s=0;s<e;s++){const p=o?String.fromCharCode(i+s):String(s+1);a.push(p)}return a}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-step2"]],inputs:{step:"step"},outputs:{fg:"fg"},decls:12,vars:3,consts:[[1,"w-full"],[1,"screen-border"],[1,"screen"],[1,"flex","w-full","p-5","pb-0"],[4,"ngIf"],["class","flex-1",4,"ngIf"],[1,"flex","w-full","px-5","mt-0.5","mb-3"],[1,"w-14"],[2,"display","none"],[1,"flex-1"],["class","flex justify-between",4,"ngIf"],["class","mx-3 my-0.5",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mx-3","my-0.5"],[1,"w-8","h-7","p-1","mb-1","flex","justify-center","items-center","text-center","row-rank",3,"disabled","value","ngModel","input","ngModelChange","click"],[4,"ngFor","ngForOf"],[1,"flex"],["class","m-0.5 flex-1",4,"ngFor","ngForOf"],[1,"m-0.5","flex-1"],[3,"seatIndex","seatSetting","showType","activeOut"],[1,"flex","justify-between"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-full","text-center","h-6","col-rank",3,"disabled","value","ngModel","ngModelChange","click"],["inputRef","ngModel"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0)(1,"div"),t._UZ(2,"div",1)(3,"div",2),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,mt,2,2,"ul",4),t.YNc(6,ft,2,1,"ul",5),t.qZA(),t.TgZ(7,"div",6)(8,"div",7),t._UZ(9,"span",8),t.qZA(),t.TgZ(10,"div",9),t.YNc(11,xt,2,2,"ul",10),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",o.colsArr.length>0),t.xp6(1),t.Q6J("ngIf",o.step!==o.Step.createMap),t.xp6(5),t.Q6J("ngIf",o.rowsArr.length>0))},dependencies:[u.sg,u.O5,c.Fj,c.JJ,c.On,q],styles:[".screen-border[_ngcontent-%COMP%]{border-width:1px;border-color:#8988ff}.screen[_ngcontent-%COMP%]{width:100%;height:32px;background:linear-gradient(180deg,rgba(137,136,255,.2) 0%,rgba(103,101,238,0) 100%);flex:none;order:1;align-self:stretch;flex-grow:0}.row-rank[_ngcontent-%COMP%]{color:#9c6dff;border:1px solid #9C6DFF;background:#1A1A1A}.row-rank[_ngcontent-%COMP%]:disabled{border:0px;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity));background:unset}.col-rank[_ngcontent-%COMP%]{color:#71ddff;border:1px solid #71DDFF;font-size:60%;background:#1A1A1A}.col-rank[_ngcontent-%COMP%]:disabled{border:0px;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity));background:unset}"]}),n})();function Ct(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",35),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.handleOptionSelected(i))}),t._uU(1),t.qZA()}if(2&n){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(null==e?null:e.name)}}function Tt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",0)(1,"button",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onPositiveClick("back"))}),t._UZ(2,"img",37),t.qZA(),t.TgZ(3,"div",38),t._uU(4,"\u4e0a\u4e00\u6b65"),t.qZA()()}}function bt(n,r){1&n&&t._UZ(0,"div",0)}function wt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",0)(1,"div",39),t._uU(2,"\u4e0b\u4e00\u6b65"),t.qZA(),t.TgZ(3,"button",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onPositiveClick("next"))}),t._UZ(4,"img",41),t.qZA()()}}function vt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",0)(1,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onPositiveClick("finish"))}),t._uU(2,"\u5b8c\u6210"),t.qZA()()}}let N=(()=>{class n{constructor(e,o,a,i,s,p){this.commonAPIService=e,this.changeDetectorRef=o,this.theaterService=a,this.route=i,this.router=s,this.fb=p,this.isEdit=!1,this.Step=g,this.theaterId="",this.typeOptions=[],this.row=0,this.col=0,this.type=!0,this.step=g.createMap,this.selectedText="",this.seatMap=[],this.rowLabel=[],this.colLabel=[]}ngOnInit(){this.initForm(),this.isEdit="edit"===this.route.snapshot?.url[1]?.path,console.log("isEdit",this.isEdit,this.route.snapshot),this.getOptionAPI(2),this.isEdit?(this.theaterId=this.route.snapshot.params.id,this.getTheaterInfoAPI()):this.formGroup.get("rowType")?.setValue(1)}ngAfterViewInit(){console.log(this.step2),this.changeDetectorRef.detectChanges()}handleChange(){this.inputRow=Math.ceil(this.inputRow),this.inputCol=Math.ceil(this.inputCol)}initForm(){this.formGroup=this.fb.group({theaterName:["",[c.kI.required]],theaterFloor:["",[c.kI.required]],theaterType:["",[c.kI.required]],row:["",[c.kI.required,c.kI.pattern("[0-9]*")]],col:["",[c.kI.required,c.kI.pattern("[0-9]*")]],rowType:[!0],step2:this.fb.group({})})}setForm(e){if(this.isEdit){const o=this.parseTheaterType(e.rowLabel);this.formGroup.patchValue({theaterName:e.name,theaterFloor:e.floor,theaterType:e.type,row:e.row,col:e.col,rowType:o?1:0,step2:{seatMap:e.seatMap,rowLabel:e.rowLabel,colLabel:e.colLabel}})}this.changeDetectorRef.detectChanges(),console.log("formGroup- \u5e36\u503c",this.formGroup)}parseTheaterType(e){const o=e,a=o.filter(p=>/[A-Za-z]/.test(p)),i=o.filter(p=>/\d/.test(p));return a.length>i.length}addForm(e,o){this.formGroup.setControl(o,e)}onPositiveClick(e){switch(e){case"next":this.nextStep();break;case"back":this.lastStep();break;case"finish":this.finish()}}nextStep(){switch(this.step){case g.createMap:if(this.formGroup.invalid)return void alert("\u8acb\u586b\u5beb\u6240\u6709\u6b04\u4f4d");if(this.isEdit)this.seatMap=this.formGroup.get("step2.seatMap")?.value,this.rowLabel=this.formGroup.get("step2.rowLabel")?.value,this.colLabel=this.formGroup.get("step2.colLabel")?.value,this.step2?.setSeatChart(this.seatMap,this.rowLabel,this.colLabel);else{const e=this.formGroup.get("row")?.value,o=this.formGroup.get("col")?.value,a=this.formGroup.get("rowType")?.value;this.step2?.seatChartGenerator(o,e,a)}this.step2?.setSeatSettingType(m.showOrNot),this.formGroup.disable(),this.step++;break;case g.seatMapSetting:this.step2?.setSeatSettingType(m.disable),this.step++;break;case g.rank:this.step2?.setSeatSettingType(m.seatType),this.step++;break;case g.seatTypeSetting:this.step2?.setSeatSettingType(m.disable)}}lastStep(){switch(this.step--,this.step){case g.createMap:this.formGroup.enable(),this.step2?.setSeatSettingType(m.disable);break;case g.seatMapSetting:this.step2?.setSeatSettingType(m.showOrNot);break;case g.rank:this.step2?.setSeatSettingType(m.disable);break;case g.seatTypeSetting:this.step2?.setSeatSettingType(m.seatType)}}handleOptionSelected(e){this.selectedText=e?.name}getSeatMapResult(e){this.seatMap=e.seatMap,this.rowLabel=e.rowLabel,this.colLabel=e.colLabel}finish(){console.log("=== get result ===");const e=this.formGroup.getRawValue();console.log(e);let o=0,a=0;for(const s of e.step2.seatMap)"N"!=s&&o++,"1"===s&&a++;let i={name:e.theaterName,type:e.theaterType,floor:e.theaterFloor,totalCapacity:o,wheelChairCapacity:a,row:e.row,col:e.col,rowLabel:e.step2.rowLabel,colLabel:e.step2.colLabel,seatMap:e.step2.seatMap};this.isEdit?this.patchUpdateTheaterAPI(i):(i={...i,status:0},this.postCreateTheaterAPI(i))}getOptionAPI(e){this.commonAPIService.getOption(e).subscribe(o=>{console.log(e,"\u53d6\u5f97\u9078\u9805\u8cc7\u6599-\u6210\u529fres",o),this.typeOptions=o.data,this.changeDetectorRef.detectChanges()})}getTheaterInfoAPI(){setTimeout(()=>{this.theaterService.getTheaterInfo(this.theaterId).subscribe(e=>{console.log(e),this.changeDetectorRef.detectChanges(),this.setForm(e.data),this.nextStep()})})}postCreateTheaterAPI(e){this.theaterService.createTheater(e).subscribe(o=>{console.log("\u65b0\u589e\u5f71\u5ef3\u8cc7\u8a0a-\u6210\u529fres",o),this.router.navigate([d.F.THEATER,o.data.theater._id]),alert(o.message)})}patchUpdateTheaterAPI(e){this.theaterService.updateTheater(this.theaterId,e).subscribe(o=>{console.log("\u66f4\u65b0\u5f71\u5ef3\u8cc7\u8a0a-\u6210\u529fres",o),this.router.navigate([d.F.THEATER,this.theaterId]),alert(o.message)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P.a),t.Y36(t.sBO),t.Y36(v),t.Y36(h.gz),t.Y36(h.F0),t.Y36(c.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-theater-detail-page"]],viewQuery:function(e,o){if(1&e&&t.Gf(J,5),2&e){let a;t.iGM(a=t.CRH())&&(o.step2=a.first)}},decls:83,vars:17,consts:[[1,"flex-container"],[1,"w-[30%]","px-[20px]"],[1,"wrapper-page","form-common-back","utility-common-back",3,"formGroup"],[1,"mb-[30px]"],[1,"mb-[20px]",2,"font-size","14px"],[1,"row"],[1,"form-title"],[1,"form-content"],["type","text","formControlName","theaterName",1,"form-input"],[1,"form-select","select-small"],["appearance","fill"],["placeholder","\u8acb\u9078\u64c7","formControlName","theaterFloor"],[3,"value"],[1,"form-select"],["placeholder","\u8acb\u9078\u64c7","formControlName","theaterType"],[3,"value","click",4,"ngFor","ngForOf"],[1,"mt-[30px]",2,"font-size","14px"],[1,"text-right"],[1,"form-content","ml-[20px]",2,"display","flex"],[1,"form-radio","list-row","text-[13px]"],["aria-label","Select an option","formControlName","rowType"],[1,"mr-[25px]",3,"value"],["type","number","min","1","formControlName","row",1,"form-input",3,"ngModel","ngModelChange","input"],["type","number","min","1","formControlName","col",1,"form-input",3,"ngModel","ngModelChange","input"],[1,"flex",2,"justify-content","right"],["mat-raised-button","","color","primary","type","submit",1,"w-2/3",3,"disabled","click"],[1,"w-[70%]","pr-[20px]",3,"hidden"],[1,"wrapper-page","form-common-back","utility-common-back"],[1,"text-center","mb-[30px]",2,"font-size","14px"],[3,"step","fg"],[1,"w-fill"],[1,"px-[20px]"],[3,"ngIf","ngIfElse"],["showBlank",""],["class","flex-container",4,"ngIf"],[3,"value","click"],["mat-raised-button","","color","accent",1,"secondary","btn-icon","mr-[10px]",3,"click"],["src","assets/images/icon/arrowR.svg","alt","arrow"],[1,"mt-[10px]","ml-[8px]"],[1,"mt-[10px]","mr-[8px]"],["mat-raised-button","","color","primary",1,"secondary","btn-icon","mr-[10px]",3,"click"],["src","assets/images/icon/arrowL.svg","alt","arrow"],["mat-raised-button","","color","primary","type","submit",1,"w-1/6",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"cine-card",3)(4,"cine-card-header",4),t._uU(5,"\u57fa\u790e\u8cc7\u8a0a"),t.qZA(),t.TgZ(6,"cine-card-content")(7,"div",5)(8,"span",6),t._uU(9,"\u540d\u7a31"),t.qZA(),t.TgZ(10,"div",7),t._UZ(11,"input",8),t.qZA()(),t.TgZ(12,"div",5)(13,"span",6),t._uU(14,"\u6a13\u5c64"),t.qZA(),t.TgZ(15,"div",7)(16,"div",9)(17,"mat-form-field",10)(18,"mat-label"),t._uU(19,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(20,"mat-select",11)(21,"mat-option",12),t._uU(22,"1F"),t.qZA(),t.TgZ(23,"mat-option",12),t._uU(24,"2F"),t.qZA(),t.TgZ(25,"mat-option",12),t._uU(26,"3F"),t.qZA(),t.TgZ(27,"mat-option",12),t._uU(28,"4F"),t.qZA()()()()()(),t.TgZ(29,"div",5)(30,"span",6),t._uU(31,"\u985e\u578b"),t.qZA(),t.TgZ(32,"div",7)(33,"div",13)(34,"mat-form-field",10)(35,"mat-label"),t._uU(36,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(37,"mat-select",14),t.YNc(38,Ct,2,2,"mat-option",15),t.qZA()()()()(),t.TgZ(39,"cine-card-header",16)(40,"div",0)(41,"div"),t._uU(42," \u5ea7\u4f4d\u6578\u91cf "),t.qZA(),t.TgZ(43,"div",17),t._uU(44," \u203b\u8d70\u9053\u4e5f\u7b971\u884c/\u5217 "),t.qZA()()(),t.TgZ(45,"div",5)(46,"span",6),t._uU(47,"\u76f4\u6392\u724c\u865f"),t.qZA(),t.TgZ(48,"div",18)(49,"div",19)(50,"mat-radio-group",20)(51,"mat-radio-button",21),t._uU(52,"A ~ Z"),t.qZA(),t.TgZ(53,"mat-radio-button",21),t._uU(54,"1, 2, 3..."),t.qZA()()()()(),t.TgZ(55,"div",5)(56,"span",6),t._uU(57,"\u76f4\u6392\u683c\u6578"),t.qZA(),t.TgZ(58,"div",7)(59,"input",22),t.NdJ("ngModelChange",function(i){return o.inputRow=i})("input",function(){return o.handleChange()}),t.qZA()()(),t.TgZ(60,"div",5)(61,"span",6),t._uU(62,"\u6a6b\u6392\u683c\u6578"),t.qZA(),t.TgZ(63,"div",7)(64,"input",23),t.NdJ("ngModelChange",function(i){return o.inputCol=i})("input",function(){return o.handleChange()}),t.qZA()()(),t.TgZ(65,"div",24)(66,"button",25),t.NdJ("click",function(){return o.onPositiveClick("next")}),t._uU(67,"\u7522\u751f\u5ea7\u4f4d\u5716"),t.qZA()()()()()(),t.TgZ(68,"section",26)(69,"div",27)(70,"cine-card",3)(71,"cine-card-header",28),t._uU(72,"\u203b\u9ede\u9078\u4ee5\u8a2d\u5b9a\u975e\u5ea7\u4f4d\u5340(ex:\u8d70\u9053)"),t.qZA(),t.TgZ(73,"cine-card-content")(74,"app-step2",29),t.NdJ("fg",function(i){return o.addForm(i,"step2")}),t.qZA()()()()()(),t.TgZ(75,"div",30)(76,"section",31)(77,"div",0),t.YNc(78,Tt,5,0,"ng-template",32),t.YNc(79,bt,1,0,"ng-template",null,33,t.W1O),t.YNc(81,wt,5,0,"div",34),t.YNc(82,vt,3,0,"div",34),t.qZA()()()),2&e){const a=t.MAs(80);t.xp6(2),t.Q6J("formGroup",o.formGroup),t.xp6(19),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4),t.xp6(11),t.Q6J("ngForOf",o.typeOptions),t.xp6(13),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0),t.xp6(6),t.Q6J("ngModel",o.inputRow),t.xp6(5),t.Q6J("ngModel",o.inputCol),t.xp6(2),t.Q6J("disabled",o.step!==o.Step.createMap),t.xp6(2),t.Q6J("hidden",o.step===o.Step.createMap),t.xp6(6),t.Q6J("step",o.step),t.xp6(4),t.Q6J("ngIf",o.step>o.Step.createMap)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",o.step<o.Step.seatTypeSetting&&o.step!==o.Step.createMap),t.xp6(1),t.Q6J("ngIf",o.step===o.Step.seatTypeSetting)}},dependencies:[u.sg,u.O5,c.Fj,c.wV,c.JJ,c.JL,c.qQ,c.sg,c.u,x.VQ,x.U0,b.KE,b.hX,M.gD,C.ey,y.lW,O.A,A.g,D.n,J],styles:[".form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:20px}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{width:20%;font-weight:400;font-size:13px;color:#ddd}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{width:80%;min-height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{height:48px;padding:16px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-input.input-textarea[_ngcontent-%COMP%]{height:200px!important;width:100%!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field{font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex{padding:16px 12px!important;padding-bottom:12px;border-radius:16px!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0;border-top:0}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select-arrow-wrapper{margin-top:10px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrappe{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted.mat-form-field-empty.mat-empty{display:inline-block!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container{height:15px;width:15px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle, .utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{border-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle{height:15px;width:15px;border-width:1px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{height:15px;width:15px;background-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio.list-row[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:row;align-items:center}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]   .list-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.utility-common-back[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{border-top:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{border-top:0!important;display:flex;align-items:center;height:48px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0 12px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{margin-right:5px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-underline, .utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-subscript-wrapper{display:none}.utility-common-back[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:6px 12px;letter-spacing:.1em;text-align:center;font-weight:500;font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .btn.gray[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);color:#ffffff80}.utility-common-back[_ngcontent-%COMP%]   .btn.small[_ngcontent-%COMP%]{border-radius:4px;height:30px}.utility-common-back[_ngcontent-%COMP%]   .btn.medium[_ngcontent-%COMP%]{border-radius:6px;height:42px}.form-title[_ngcontent-%COMP%]{width:25%!important}.form-content[_ngcontent-%COMP%]{margin-left:10px}.form-text[_ngcontent-%COMP%]{font-size:15px!important;margin-left:16px}.flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.form-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#ffffff0d}"]}),n})();function Mt(n,r){if(1&n&&(t.TgZ(0,"li",11)(1,"div",12),t._uU(2),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e)}}function yt(n,r){if(1&n&&(t.TgZ(0,"ul"),t.YNc(1,Mt,3,1,"li",10),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.rowsOrder)}}function Ot(n,r){if(1&n&&t.YNc(0,yt,2,1,"ul",9),2&n){const e=t.oxw();t.Q6J("ngIf",e.colsArr.length>0)}}function At(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",14)(1,"input",15,16),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).index,p=t.oxw(3);return t.KtG(p.rowsOrder[s]=a)})("input",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.convertToUpperCase())})("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&n){const e=r.$implicit,o=r.index,a=t.oxw(3);t.xp6(1),t.s9C("value",e),t.Q6J("ngModel",a.rowsOrder[o])}}function Zt(n,r){if(1&n&&(t.TgZ(0,"ul"),t.YNc(1,At,3,2,"li",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.rowsOrder)("ngForTrackBy",e.trackByIndex)}}function Pt(n,r){if(1&n&&t.YNc(0,Zt,2,2,"ul",9),2&n){const e=t.oxw();t.Q6J("ngIf",e.colsArr.length>0)}}function St(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",19)(1,"app-manager-seatchart-seat",20),t.NdJ("activeOut",function(a){t.CHM(e);const i=t.oxw(2);return t.KtG(i.activeOut(a))}),t.qZA()()}if(2&n){const e=r.index,o=t.oxw().index,a=t.oxw();t.xp6(1),t.Q6J("seatIndex",o*a.cols+e)("seatSetting",a.seatSetting)("showType",a.responseArr[o*a.cols+e])}}function kt(n,r){if(1&n&&(t.TgZ(0,"li")(1,"ul",17),t.YNc(2,St,2,3,"li",18),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.colsArr)}}function Ft(n,r){if(1&n&&(t.TgZ(0,"li",27),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e," ")}}function It(n,r){if(1&n&&(t.TgZ(0,"ul",25),t.YNc(1,Ft,2,1,"li",26),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.colsOrder)}}function Dt(n,r){if(1&n&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"span",23),t.qZA(),t.TgZ(3,"div",6),t.YNc(4,It,2,1,"ul",24),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.rowsArr.length>0)}}function Ut(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"input",30,16),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).index,p=t.oxw(3);return t.KtG(p.colsOrder[s]=a)})("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&n){const e=r.$implicit,o=r.index,a=t.oxw(3);t.xp6(1),t.s9C("value",e),t.Q6J("ngModel",a.colsOrder[o])}}function qt(n,r){if(1&n&&(t.TgZ(0,"ul",25),t.YNc(1,Ut,3,2,"li",29),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.colsOrder)("ngForTrackBy",e.trackByIndex)}}function Jt(n,r){if(1&n&&(t.TgZ(0,"div",21)(1,"div",28),t._UZ(2,"span",23),t.qZA(),t.TgZ(3,"div",6),t.YNc(4,qt,2,2,"ul",24),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.rowsArr.length>0)}}let Nt=(()=>{class n{constructor(){this.responseArr=[],this.rowsArr=[],this.colsArr=[],this.rowsOrder=[],this.colsOrder=[],this.lastType=!0,this.cols=0,this.rows=0,this.isPreview=!1,this.getViewData={seatMap:[],rowLabel:[],colLabel:[]},this.type=!0,this.step=1,this.seatMapResult=new t.vpe}ngOnInit(){this.createSeat(this.rows,this.cols),(0===this.rowsOrder.length||this.rowsOrder.length!=this.rows||this.lastType!=this.type)&&(this.rowsOrder=this.createRowsOrder(this.rows,this.type),this.lastType=this.type),(0===this.colsOrder.length||this.colsOrder.length!=this.cols)&&(this.colsOrder=this.createRowsOrder(this.cols,!1)),this.isPreview&&(console.log(this.getViewData),this.responseArr=this.getViewData.seatMap,this.rowsOrder=this.getViewData.rowLabel,this.colsOrder=this.getViewData.colLabel,this.seatSetting=4)}ngOnChanges(){this.createSeat(this.rows,this.cols),(0===this.rowsOrder.length||this.rowsOrder.length!=this.rows||this.lastType!=this.type)&&(this.rowsOrder=this.createRowsOrder(this.rows,this.type),this.lastType=this.type),(0===this.colsOrder.length||this.colsOrder.length!=this.cols)&&(this.colsOrder=this.createRowsOrder(this.cols,!1)),this.isPreview&&(console.log(this.getViewData),this.responseArr=this.getViewData.seatMap,this.rowsOrder=this.getViewData.rowLabel,this.colsOrder=this.getViewData.colLabel,this.seatSetting=4)}trackByIndex(e,o){return e}convertToUpperCase(){for(let e=0;e<this.rowsOrder.length;e++)this.rowsOrder[e]=this.rowsOrder[e].toUpperCase()}selectAllText(){document.activeElement instanceof HTMLInputElement&&document.activeElement.select()}activeOut(e){this.responseArr[e.seatIndex]=e.type,console.log("activeOut"),console.log(this.responseArr);const o=JSON.parse(JSON.stringify({seatMap:this.responseArr,rowLabel:this.rowsOrder,colLabel:this.colsOrder}));this.seatMapResult.emit(o)}createSeat(e,o){this.responseArr=Array(e*o).fill("0"),this.rowsArr=Array(e).fill("0"),this.colsArr=Array(o).fill("0")}createRowsOrder(e,o){const a=[],i="A".charCodeAt(0);for(let s=0;s<e;s++){const p=o?String.fromCharCode(i+s):String(s+1);a.push(p)}return a}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-manager-seatchart"]],inputs:{cols:"cols",rows:"rows",isPreview:"isPreview",getViewData:"getViewData",type:"type",step:"step"},outputs:{seatMapResult:"seatMapResult"},features:[t.TTD],decls:13,vars:5,consts:[[1,"w-full"],[1,"screen-border"],[1,"screen"],[1,"flex","w-full","p-5","pb-0"],[3,"ngIf","ngIfElse"],["canEditRow",""],[1,"flex-1"],[4,"ngFor","ngForOf"],["canEditCol",""],[4,"ngIf"],["class","mx-3",4,"ngFor","ngForOf"],[1,"mx-3"],[1,"w-6","h-8","rounded-t-lg","rounded-b-md","p-1","text-gray-400","flex","justify-center","items-center"],["class","mx-3 my-0.5",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mx-3","my-0.5"],[1,"text-input","w-8","h-7","p-1","mb-1","flex","justify-center","items-center","text-center",2,"color","#9C6DFF","border","1px solid #9C6DFF",3,"value","ngModel","ngModelChange","input","click"],["inputRef","ngModel"],[1,"flex"],["class","m-0.5 flex-1",4,"ngFor","ngForOf"],[1,"m-0.5","flex-1"],[3,"seatIndex","seatSetting","showType","activeOut"],[1,"flex","w-full","px-5","mt-0.5","mb-3"],[1,"w-12"],[2,"display","none"],["class","flex justify-between",4,"ngIf"],[1,"flex","justify-between"],["class","w-full text-center text-gray-400","style","font-size: 20%;",4,"ngFor","ngForOf"],[1,"w-full","text-center","text-gray-400",2,"font-size","20%"],[1,"w-14"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-input","w-full","text-center","h-6",2,"color","#71DDFF","border","1px solid #71DDFF","font-size","60%",3,"value","ngModel","ngModelChange","click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"section",0)(1,"div"),t._UZ(2,"div",1)(3,"div",2),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,Ot,1,1,"ng-template",4),t.YNc(6,Pt,1,1,"ng-template",null,5,t.W1O),t.TgZ(8,"ul",6),t.YNc(9,kt,3,1,"li",7),t.qZA()(),t.YNc(10,Dt,5,1,"ng-template",4),t.YNc(11,Jt,5,1,"ng-template",null,8,t.W1O),t.qZA()),2&e){const a=t.MAs(7),i=t.MAs(12);t.xp6(5),t.Q6J("ngIf",2!=o.step)("ngIfElse",a),t.xp6(4),t.Q6J("ngForOf",o.rowsArr),t.xp6(1),t.Q6J("ngIf",2!=o.step)("ngIfElse",i)}},dependencies:[u.sg,u.O5,c.Fj,c.JJ,c.On,q],styles:[".screen-border[_ngcontent-%COMP%]{border-width:1px;border-color:#8988ff}.screen[_ngcontent-%COMP%]{width:100%;height:32px;background:linear-gradient(180deg,rgba(137,136,255,.2) 0%,rgba(103,101,238,0) 100%);flex:none;order:1;align-self:stretch;flex-grow:0}.text-input[_ngcontent-%COMP%]{background:#1A1A1A}"]}),n})();const Lt=[{path:"",children:[{path:"",component:U},{path:`${d.F.DETAIL}/${d.F.CREATE}`,component:N},{path:":id",component:(()=>{class n{constructor(e,o){this.route=e,this.theaterService=o,this.theaterId="",this.rows=0,this.cols=0,this.getViewData={seatMap:[],rowLabel:[],colLabel:[]},this.theaterTypes={1:"2D",2:"3D",3:"IMAX",4:"4DX"}}ngOnInit(){this.theaterId=this.route.snapshot.params.id,this.getTheaterInfo(this.theaterId)}getTheaterInfo(e){setTimeout(()=>{this.theaterService.getTheaterInfo(e).subscribe(o=>{console.log(o),this.theaterData=o.data,this.rows=o.data.row,this.cols=o.data.col,this.getViewData.rowLabel=o.data.rowLabel,this.getViewData.colLabel=o.data.colLabel,this.getViewData.seatMap=o.data.seatMap})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.gz),t.Y36(v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-theater-view-page"]],decls:35,vars:9,consts:[[1,"wrapper-page"],[1,"card-wrap","px-[15px]"],[1,"main-box"],[1,"main-card"],[1,"showBox"],[1,"showText"],[3,"rows","cols","getViewData","isPreview"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"cine-card",1)(2,"cine-card-content")(3,"div",2)(4,"div",3)(5,"span"),t._uU(6,"\u540d\u7a31"),t.qZA(),t.TgZ(7,"div",4)(8,"span",5),t._uU(9),t.qZA()()(),t.TgZ(10,"div",3)(11,"span"),t._uU(12,"\u6a13\u5c64"),t.qZA(),t.TgZ(13,"div",4)(14,"span",5),t._uU(15),t.qZA()()(),t.TgZ(16,"div",3)(17,"span"),t._uU(18,"\u985e\u578b"),t.qZA(),t.TgZ(19,"div",4)(20,"span",5),t._uU(21),t.qZA()()(),t.TgZ(22,"div",3)(23,"span"),t._uU(24,"\u5e2d\u6b21"),t.qZA(),t.TgZ(25,"div",4)(26,"span",5),t._uU(27),t.qZA()()(),t.TgZ(28,"div",3)(29,"span"),t._uU(30,"\u7121\u969c\u7919\u5e2d\u6b21"),t.qZA(),t.TgZ(31,"div",4)(32,"span",5),t._uU(33),t.qZA()()()(),t._UZ(34,"app-manager-seatchart",6),t.qZA()()()),2&e&&(t.xp6(9),t.Oqu(null==o.theaterData?null:o.theaterData.name),t.xp6(6),t.hij("",null==o.theaterData?null:o.theaterData.floor,"F"),t.xp6(6),t.Oqu(o.theaterTypes[null==o.theaterData?null:o.theaterData.type]),t.xp6(6),t.Oqu(null==o.theaterData?null:o.theaterData.totalCapacity),t.xp6(6),t.Oqu(null==o.theaterData?null:o.theaterData.wheelChairCapacity),t.xp6(1),t.Q6J("rows",o.rows)("cols",o.cols)("getViewData",o.getViewData)("isPreview",!0))},dependencies:[O.A,A.g,Nt],styles:[".wrapper-page[_ngcontent-%COMP%]{margin:0 30px 100px!important}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]{margin-bottom:50px!important}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]{padding:0 30px;display:flex;flex-direction:row;justify-content:space-between;margin-bottom:50px}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .main-card[_ngcontent-%COMP%]   .showBox[_ngcontent-%COMP%]{margin-top:10px;border:rgba(255,255,255,.3) 1px solid;border-radius:12px;text-align:center}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .main-card[_ngcontent-%COMP%]   .showBox[_ngcontent-%COMP%]   .showText[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#a7e8ff;margin-bottom:0;padding:15px}"]}),n})()},{path:`${d.F.DETAIL}/${d.F.EDIT}/:id`,component:N},{path:`${d.F.LIST}`,component:U}]}];let Qt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(Lt),h.Bz]}),n})();var Bt=l(4144),Gt=l(9602),Yt=l(4011),Vt=l(3687);let Rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,c.u5,w.Is]}),n})(),Ht=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,c.UX,c.u5,Qt,k.Ps,x.Fk,M.LD,G,Gt.FA,C.XK,Bt.c,y.ot,I.TU,Yt.d,Vt.U,Rt]}),n})()}}]);