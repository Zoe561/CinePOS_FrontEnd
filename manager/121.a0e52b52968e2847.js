"use strict";(self.webpackChunkmanager=self.webpackChunkmanager||[]).push([[121],{5121:(ne,S,l)=>{l.r(S),l.d(S,{TheaterPageModule:()=>te});var g=l(6895),c=l(4006),h=l(3456),d=l(8526),Q=l(2721),B=l(9646),G=l(3900),t=l(4650),k=l(3227),Y=l(2843),f=l(9300),_=l(262),F=l(529),V=l(3796),T=(()=>{return(o=T||(T={}))[o.success=1]="success",o[o.systemError=-1]="systemError",T;var o})();let M=(()=>{class o{constructor(e){this.http=e,this.isPopupInvalidMsg=!1,this.handleResponse=n=>{let a=!0;return n.code!==T.success&&(a=!1,!this.isPopupInvalidMsg&&n.message&&(this.isPopupInvalidMsg=!0,alert(n.message),setTimeout(()=>{this.isPopupInvalidMsg=!1}))),a},this.handleError=n=>(console.log("handleError"),n.error instanceof ErrorEvent?console.error("An error occurred:",n.error.message):console.error(`Backend returned code ${n.status}, body was: ${n.error}`),this.isPopupInvalidMsg||(this.isPopupInvalidMsg=!0,alert("\u7cfb\u7d71\u767c\u751f\u554f\u984c")),(0,Y._)("Something bad happened; please try again later."))}getTheaterList(e,n,a,r,s,p,P){return this.request("get",{name:e,floor:n,type:a,capacityFrom:r,capacityTo:s,withDisabled:p,status:P},"theater/list")}getTheaterInfo(e){return this.request("get",{},`theater/${e}`)}getTheaterUsage(e){return this.request("get",{},`theater/${e}/usage`)}createTheater(e){return this.request("post",e,"theater")}updateTheater(e,n){return this.request("patch",n,`theater/${e}`)}updateStatus(e,n){return this.request("patch",n,`theater/${e}/onoffline`)}deleteTheater(e){return this.request("delete",{},`theater/${e}`)}request(e,n,a){const r=this.getHTTPHeaders(),s=V.N.cinePosApi+"/v1/manager/"+a;switch(e){case"get":default:return this.http.get(s,{headers:r,params:n}).pipe((0,f.h)(this.handleResponse),(0,_.K)(this.handleError));case"delete":return this.http.delete(s,{headers:r,params:n}).pipe((0,f.h)(this.handleResponse),(0,_.K)(this.handleError));case"post":return this.http.post(s,n,{headers:r}).pipe((0,f.h)(this.handleResponse),(0,_.K)(this.handleError));case"patch":return this.http.patch(s,n,{headers:r}).pipe((0,f.h)(this.handleResponse),(0,_.K)(this.handleError));case"put":return this.http.put(s,n,{headers:r}).pipe((0,f.h)(this.handleResponse),(0,_.K)(this.handleError))}}getHTTPHeaders(){return new F.WM({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("token")})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(F.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var I=l(7392),x=l(1948),b=l(9549),y=l(4385),C=l(3238),D=l(1281);let R=(()=>{class o{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=(0,D.Ig)(e)}get inset(){return this._inset}set inset(e){this._inset=(0,D.Ig)(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,n){2&e&&(t.uIk("aria-orientation",n.vertical?"vertical":"horizontal"),t.ekj("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),o})(),H=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[C.BQ,C.BQ]}),o})();var O=l(4859),U=l(7974),A=l(6064),Z=l(8302),q=l(6599),z=l(6459);function K(o,i){if(1&o&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(null==e?null:e.name)}}function j(o,i){1&o&&(t.TgZ(0,"p",32),t._uU(1,"\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u8cc7\u6599\uff01"),t.qZA())}function $(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.updateStatus(!1,a._id))}),t._UZ(1,"mat-icon",46),t.TgZ(2,"span"),t._uU(3," \u4e0b\u67b6"),t.qZA()()}}function X(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.updateStatus(!0,a._id))}),t._UZ(1,"mat-icon",47),t.TgZ(2,"span"),t._uU(3," \u767c\u4f48"),t.qZA()()}}function W(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.deleteTheater(a._id))}),t._UZ(1,"mat-icon",48),t.TgZ(2,"span"),t._uU(3," \u522a\u9664"),t.qZA()()}}function tt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",34),t._uU(2),t.qZA(),t.TgZ(3,"td",35),t._uU(4),t.qZA(),t.TgZ(5,"td",36),t._uU(6),t.qZA(),t.TgZ(7,"td",37),t._uU(8),t.qZA(),t.TgZ(9,"td",38),t._uU(10),t.qZA(),t.TgZ(11,"td",39),t._uU(12),t.qZA(),t.TgZ(13,"td",40)(14,"div",41)(15,"button",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.openDetailPage(r._id))}),t._UZ(16,"mat-icon",43),t.TgZ(17,"span"),t._uU(18," \u6aa2\u8996"),t.qZA()(),t.TgZ(19,"button",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.openEditPage(r._id))}),t._UZ(20,"mat-icon",44),t.TgZ(21,"span"),t._uU(22," \u7de8\u8f2f"),t.qZA()(),t.YNc(23,$,4,0,"button",45),t.YNc(24,X,4,0,"button",45),t.YNc(25,W,4,0,"button",45),t.qZA()()()}if(2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.floor+"F"),t.xp6(2),t.Oqu(e.type),t.xp6(2),t.Oqu(e.totalCapacity),t.xp6(2),t.Oqu(e.wheelChairCapacity||"-"),t.xp6(2),t.Oqu(1===e.status?"\u5df2\u767c\u4f48":"\u66ab\u5b58"),t.xp6(11),t.Q6J("ngIf",1===e.status),t.xp6(1),t.Q6J("ngIf",0===e.status),t.xp6(1),t.Q6J("ngIf",0===e.status)}}function et(o,i){if(1&o&&(t.TgZ(0,"cine-table")(1,"thead")(2,"tr")(3,"th"),t._uU(4,"\u540d\u7a31"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"\u6a13\u5c64"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"\u985e\u578b"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"\u5e2d\u6b21"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"\u8f2a\u6905\u5e2d\u6b21"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"\u72c0\u614b"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"\u529f\u80fd"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,tt,26,9,"tr",33),t.qZA()()),2&o){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.theaterListView)}}let J=(()=>{class o{constructor(e,n,a,r){this.router=e,this.commonAPIService=n,this.theaterService=a,this.changeDetectorRef=r,this.theaterListView=[],this.pageSet1=new Q.n,this.typeOptions=[],this.theaterListApiData=[]}get theaterName(){return this.formGroup.get("theaterName")}get floor(){return this.formGroup.get("floor")}get theaterType(){return this.formGroup.get("theaterType")}get capacityFrom(){return this.formGroup.get("capacityFrom")}get capacityTo(){return this.formGroup.get("capacityTo")}get withDisabled(){return this.formGroup.get("withDisabled")}get status(){return this.formGroup.get("status")}ngOnInit(){this.initForm(),this.getOptionAPI(2),this.search()}initForm(){this.formGroup=new c.cw({theaterName:new c.NI(""),floor:new c.NI(""),theaterType:new c.NI(""),capacityFrom:new c.NI(""),capacityTo:new c.NI(""),withDisabled:new c.NI(""),status:new c.NI("")})}search(){if(this.formGroup.setErrors(null),this.formGroup.valid){let e=this.getSearchCondition();this.getListAPI(e)}else this.formGroup.markAllAsTouched(),alert("\u8acb\u6aa2\u67e5\u6b04\u4f4d\u662f\u5426\u6b63\u78ba\u586b\u5beb\uff01")}getSearchCondition(){return{name:this.theaterName?.value,floor:this.floor?.value,type:Array.isArray(this.theaterType.value)&&this.theaterType.value.length>0?this.theaterType.value.join(","):"",capacityFrom:this.capacityFrom?.value&&null!=this.capacityFrom?.value?this.capacityFrom?.value:"",capacityTo:this.capacityTo?.value&&null!=this.capacityTo?.value?this.capacityTo?.value:"",withDisabled:this.withDisabled?.value,status:this.status?.value}}selectAll(){const e=this.typeOptions.map(n=>n.value);this.formGroup.get("theaterType")?.setValue(e)}clearAll(){this.formGroup.get("theaterType")?.setValue([])}clearSelection(){this.formGroup.get("floor")?.setValue("")}handlePageEvent(e){console.log(e),this.pageSet1.currentPage=e.pageIndex+1,this.theaterListView=this.pageSet1.slicePage(this.theaterListApiData,this.pageSet1.currentPage,this.pageSet1.currentPageSize),this.changeDetectorRef.detectChanges()}openDetailPage(e){this.router.navigate([d.F.THEATER,e])}openEditPage(e){this.getTheaterUsageAPI(e).subscribe(n=>{n?alert("\u5f71\u5ef3\u4f7f\u7528\u4e2d\u7121\u6cd5\u7de8\u8f2f"):this.router.navigate([d.F.THEATER,d.F.DETAIL,d.F.EDIT,e])})}deleteTheater(e){let n=e;this.getTheaterUsageAPI(n).subscribe(a=>{a?alert("\u5f71\u5ef3\u4f7f\u7528\u4e2d\u7121\u6cd5\u522a\u9664"):this.theaterService.deleteTheater(n).subscribe(r=>{console.log("\u522a\u9664\u5f71\u5ef3-\u6210\u529fres",r),alert("\u522a\u9664\u5f71\u5ef3-\u6210\u529f"),this.getListAPI(this.getSearchCondition())})})}updateStatus(e,n){let a=e?1:0,r=n,s={status:a};a?this.theaterService.updateStatus(r,s).subscribe(p=>{console.log("\u66f4\u65b0\u4e0a\u67b6\u72c0\u614b-\u6210\u529fres",p),alert("\u66f4\u65b0\u4e0a\u67b6\u72c0\u614b-\u6210\u529f"),this.getListAPI(this.getSearchCondition())}):this.getTheaterUsageAPI(r).subscribe(p=>{p?alert("\u5f71\u5ef3\u4f7f\u7528\u4e2d\u7121\u6cd5\u4e0b\u67b6"):this.theaterService.updateStatus(r,s).subscribe(P=>{console.log("\u66f4\u65b0\u4e0a\u67b6\u72c0\u614b-\u6210\u529fres",P),alert("\u66f4\u65b0\u4e0a\u67b6\u72c0\u614b-\u6210\u529f"),this.getListAPI(this.getSearchCondition())})})}getOptionAPI(e){this.commonAPIService.getOption(e).subscribe(n=>{console.log(e,"\u53d6\u5f97\u9078\u9805\u8cc7\u6599-\u6210\u529fres",n),this.typeOptions=n.data,this.changeDetectorRef.detectChanges()})}getListAPI(e){this.theaterService.getTheaterList(e.name,e.floor,e.type,e.capacityFrom,e.capacityTo,e.withDisabled,e.status).subscribe(n=>{console.log("\u53d6\u5f97\u5217\u8868\u8cc7\u6599-\u6210\u529fres",n),this.theaterListApiData=n.data,this.theaterListView=this.pageSet1.slicePage(this.theaterListApiData,this.pageSet1.currentPage,this.pageSet1.currentPageSize),this.pageSet1.initialize(this.theaterListApiData.length),this.changeDetectorRef.detectChanges()})}getTheaterUsageAPI(e){return this.theaterService.getTheaterUsage(e).pipe((0,G.w)(n=>(console.log(e,"\u53d6\u5f97\u5f71\u5ef3\u4f7f\u7528\u72c0\u6cc1-\u6210\u529fres",n),(0,B.of)(!!n.data&&n.data.inUse))))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.F0),t.Y36(k.a),t.Y36(M),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-theater-list-page"]],decls:91,vars:16,consts:[[1,"w-full","px-[20px]"],[1,"wrapper-page","form-common-back","utility-common-back",3,"formGroup"],[1,"mb-[30px]"],[1,"row"],[1,"form-title"],[1,"form-content"],["type","text","formControlName","theaterName",1,"form-input","w-[300px]"],[1,"form-select","select-small"],["appearance","fill",1,"w-[300px]"],["formControlName","floor"],[3,"value"],[1,"etc-select-action"],["mat-button","",1,"etc-select-action-button",3,"click"],["fontIcon","remove_circle_outline"],[1,"form-select"],["placeholder","\u8acb\u9078\u64c7","formControlName","theaterType","multiple",""],[3,"value",4,"ngFor","ngForOf"],["fontIcon","check_box_outline"],["fontIcon","check_box_outline_blank"],["type","number","formControlName","capacityFrom",1,"form-input","w-[150px]"],["type","number","formControlName","capacityTo",1,"form-input","w-[150px]"],[1,"form-content",2,"display","flex"],[1,"form-radio","list-row","text-[12px]"],["aria-label","Select an option","formControlName","withDisabled"],[1,"mr-[25px]",3,"value"],["aria-label","Select an option","formControlName","status"],[1,"flex",2,"justify-content","right"],["mat-raised-button","","color","primary","type","submit",3,"click"],["class","p-50 text-center",4,"ngIf"],[4,"ngIf"],["aria-label","Select page",1,"demo-paginator",3,"length","pageSize","showFirstLastButtons","pageIndex","page"],["paginator",""],[1,"p-50","text-center"],[4,"ngFor","ngForOf"],["data-title","\u540d\u7a31"],["data-title","\u6a13\u5c64"],["data-title","\u985e\u578b"],["data-title","\u5e2d\u6b21"],["data-title","\u8f2a\u6905\u5e2d\u6b21"],["data-title","\u72c0\u614b"],["data-title","\u529f\u80fd",1,"w-[300px]"],[1,"button-container"],["mat-button","",1,"left-aligned-button",3,"click"],["fontIcon","remove_red_eye"],["fontIcon","edit"],["mat-button","","class","left-aligned-button",3,"click",4,"ngIf"],["fontIcon","get_app"],["fontIcon","publish"],["fontIcon","delete"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"cine-card",2)(3,"cine-card-header"),t._uU(4,"\u67e5\u8a62\u689d\u4ef6"),t.qZA(),t.TgZ(5,"cine-card-content")(6,"div",3)(7,"span",4),t._uU(8,"\u540d\u7a31"),t.qZA(),t.TgZ(9,"div",5),t._UZ(10,"input",6),t.qZA(),t.TgZ(11,"span",4),t._uU(12,"\u6a13\u5c64"),t.qZA(),t.TgZ(13,"div",5)(14,"div",7)(15,"mat-form-field",8)(16,"mat-label"),t._uU(17,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(18,"mat-select",9)(19,"mat-option",10),t._uU(20,"1F"),t.qZA(),t.TgZ(21,"mat-option",10),t._uU(22,"2F"),t.qZA(),t.TgZ(23,"mat-option",10),t._uU(24,"3F"),t.qZA(),t.TgZ(25,"mat-option",10),t._uU(26,"4F"),t.qZA(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",11)(29,"button",12),t.NdJ("click",function(){return n.clearSelection()}),t._UZ(30,"mat-icon",13),t.TgZ(31,"span"),t._uU(32," \u6e05\u9664"),t.qZA()()()()()()()(),t.TgZ(33,"div",3)(34,"span",4),t._uU(35,"\u985e\u578b"),t.qZA(),t.TgZ(36,"div",5)(37,"div",14)(38,"mat-form-field",8)(39,"mat-label"),t._uU(40,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(41,"mat-select",15),t.YNc(42,K,2,2,"mat-option",16),t._UZ(43,"mat-divider"),t.TgZ(44,"div",11)(45,"button",12),t.NdJ("click",function(){return n.selectAll()}),t._UZ(46,"mat-icon",17),t.TgZ(47,"span"),t._uU(48," \u5168\u9078"),t.qZA()(),t.TgZ(49,"button",12),t.NdJ("click",function(){return n.clearAll()}),t._UZ(50,"mat-icon",18),t.TgZ(51,"span"),t._uU(52," \u5168\u4e0d\u9078"),t.qZA()()()()()()(),t.TgZ(53,"span",4),t._uU(54,"\u5e2d\u6b21"),t.qZA(),t.TgZ(55,"div",5),t._UZ(56,"input",19),t._uU(57," \uff5e "),t._UZ(58,"input",20),t.qZA()(),t.TgZ(59,"div",3)(60,"span",4),t._uU(61,"\u6b98\u969c\u5ea7\u4f4d"),t.qZA(),t.TgZ(62,"div",21)(63,"div",22)(64,"mat-radio-group",23)(65,"mat-radio-button",24),t._uU(66,"\u6709"),t.qZA(),t.TgZ(67,"mat-radio-button",24),t._uU(68,"\u7121"),t.qZA()()()(),t.TgZ(69,"span",4),t._uU(70,"\u72c0\u614b"),t.qZA(),t.TgZ(71,"div",21)(72,"div",22)(73,"mat-radio-group",25)(74,"mat-radio-button",24),t._uU(75,"\u5df2\u767c\u4f48"),t.qZA(),t.TgZ(76,"mat-radio-button",24),t._uU(77,"\u66ab\u5b58"),t.qZA()()()()(),t.TgZ(78,"div",26)(79,"button",27),t.NdJ("click",function(){return n.search()}),t._uU(80,"\u67e5\u8a62"),t.qZA()()()(),t.TgZ(81,"cine-card")(82,"cine-card-header"),t._uU(83,"\u67e5\u8a62\u7d50\u679c"),t.qZA(),t.TgZ(84,"cine-card-content"),t.YNc(85,j,2,0,"p",28),t.YNc(86,et,19,1,"cine-table",29),t.TgZ(87,"mat-paginator",30,31),t.NdJ("page",function(r){return n.handlePageEvent(r)}),t.qZA()()(),t.TgZ(89,"span"),t._uU(90,"\xa0"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(18),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4),t.xp6(17),t.Q6J("ngForOf",n.typeOptions),t.xp6(23),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0),t.xp6(7),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0),t.xp6(9),t.Q6J("ngIf",!(null!=n.theaterListView&&n.theaterListView.length)),t.xp6(1),t.Q6J("ngIf",null==n.theaterListView?null:n.theaterListView.length),t.xp6(1),t.Q6J("length",n.pageSet1.totalCounts)("pageSize",n.pageSet1.currentPageSize)("showFirstLastButtons",!0)("pageIndex",n.pageSet1.currentPage-1))},dependencies:[g.sg,g.O5,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,I.Hw,x.VQ,x.U0,b.KE,b.hX,y.gD,C.ey,R,O.lW,U.NW,A.A,Z.g,q.n,z.a],styles:[".form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:20px}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{width:20%;font-weight:400;font-size:13px;color:#ddd}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{width:80%;min-height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{height:48px;padding:16px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-input.input-textarea[_ngcontent-%COMP%]{height:200px!important;width:100%!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field{font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex{padding:16px 12px!important;padding-bottom:12px;border-radius:16px!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0;border-top:0}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select-arrow-wrapper{margin-top:10px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrappe{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted.mat-form-field-empty.mat-empty{display:inline-block!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container{height:15px;width:15px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle, .utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{border-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle{height:15px;width:15px;border-width:1px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{height:15px;width:15px;background-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio.list-row[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:row;align-items:center}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]   .list-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.utility-common-back[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{border-top:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{border-top:0!important;display:flex;align-items:center;height:48px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0 12px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{margin-right:5px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-underline, .utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-subscript-wrapper{display:none}.utility-common-back[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:6px 12px;letter-spacing:.1em;text-align:center;font-weight:500;font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .btn.gray[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);color:#ffffff80}.utility-common-back[_ngcontent-%COMP%]   .btn.small[_ngcontent-%COMP%]{border-radius:4px;height:30px}.utility-common-back[_ngcontent-%COMP%]   .btn.medium[_ngcontent-%COMP%]{border-radius:6px;height:42px}.etc-select-action[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.etc-select-action-button[_ngcontent-%COMP%]{font-size:12px;flex:1}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.left-aligned-button[_ngcontent-%COMP%]{font-size:12px}"]}),o})();var u=(()=>{return(o=u||(u={}))[o.createMap=0]="createMap",o[o.seatMapSetting=1]="seatMapSetting",o[o.rank=2]="rank",o[o.seatTypeSetting=3]="seatTypeSetting",u;var o})(),w=l(5412);let nt=(()=>{class o{constructor(e){this.dialogRef=e}ngOnInit(){}chooseType(e){this.dialogRef.close(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(w.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-select-seat-type-dialog"]],decls:17,vars:0,consts:[[1,"text-center"],[1,"my-4"],[1,"text-lg"],[1,"dialog-content","mt-10"],["mat-dialog-close","",1,"dialog-button",3,"click"],["src","assets/images/icon/seat-wheelchair.svg","alt","handicapped",1,"h-full","mx-auto"],[1,"button-text"],["src","assets/images/icon/seat-no.svg","alt","no"],["src","assets/images/icon/seat-default.svg","alt","default"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3,"\u9078\u64c7\u7279\u6b8a\u5ea7\u4f4d\u985e\u578b"),t.qZA()(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.chooseType("1")}),t._UZ(6,"img",5),t.TgZ(7,"div",6),t._uU(8,"\u8f2a\u6905\u4f4d"),t.qZA()(),t.TgZ(9,"button",4),t.NdJ("click",function(){return n.chooseType("-1")}),t._UZ(10,"img",7),t.TgZ(11,"div",6),t._uU(12,"\u6545\u969c"),t.qZA()(),t.TgZ(13,"button",4),t.NdJ("click",function(){return n.chooseType("0")}),t._UZ(14,"img",8),t.TgZ(15,"div",6),t._uU(16,"\u9810\u8a2d\u503c"),t.qZA()()()())},dependencies:[w.ZT],styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px}.dialog-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.button-text[_ngcontent-%COMP%]{margin-top:8px;font-size:12px}"]}),o})();var m=(()=>{return(o=m||(m={}))[o.showOrNot=0]="showOrNot",o[o.seatType=1]="seatType",o[o.disable=2]="disable",m;var o})();function ot(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t._UZ(1,"img",7),t.qZA()}}function at(o,i){1&o&&(t.TgZ(0,"div",8),t._UZ(1,"img",7),t.qZA())}function it(o,i){1&o&&(t.TgZ(0,"div",9),t._UZ(1,"img",7),t.qZA())}function rt(o,i){if(1&o&&(t.ynx(0),t.YNc(1,ot,2,0,"div",3),t.YNc(2,at,2,0,"div",4),t.YNc(3,it,2,0,"div",5),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",2!=e.seatSetting&&4!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",2===e.seatSetting),t.xp6(1),t.Q6J("ngIf",4===e.seatSetting)}}function st(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t._UZ(1,"img",10),t.qZA()}}function ct(o,i){1&o&&(t.TgZ(0,"div",8),t._UZ(1,"img",10),t.qZA())}function lt(o,i){1&o&&(t.TgZ(0,"div",9),t._UZ(1,"img",10),t.qZA())}function pt(o,i){if(1&o&&(t.ynx(0),t.YNc(1,st,2,0,"div",3),t.YNc(2,ct,2,0,"div",4),t.YNc(3,lt,2,0,"div",5),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",2!=e.seatSetting&&4!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",2===e.seatSetting),t.xp6(1),t.Q6J("ngIf",4===e.seatSetting)}}function gt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t.qZA()}}function ut(o,i){1&o&&t._UZ(0,"div",14)}function mt(o,i){if(1&o&&(t.ynx(0),t.YNc(1,gt,1,0,"div",11),t.YNc(2,ut,1,0,"div",12),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",1===e.seatSetting)}}function dt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t.qZA()}}function ht(o,i){1&o&&t._UZ(0,"div",8)}function ft(o,i){1&o&&t._UZ(0,"div",9)}function _t(o,i){if(1&o&&(t.ynx(0),t.YNc(1,dt,1,0,"div",3),t.YNc(2,ht,1,0,"div",4),t.YNc(3,ft,1,0,"div",5),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",2!=e.seatSetting&&4!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",2===e.seatSetting),t.xp6(1),t.Q6J("ngIf",4===e.seatSetting)}}let N=(()=>{class o{constructor(e){this.dialog=e,this.seatIndex=0,this.showType="0",this.activeOut=new t.vpe,this.type="0"}ngOnInit(){this.type=this.showType}active(){switch(this.seatSetting){case m.showOrNot:this.type="0"===this.type?"N":"0",this.activeOut.emit({seatIndex:this.seatIndex,type:this.type});break;case m.seatType:this.dialog.open(nt,{width:"50%",height:"28%"}).afterClosed().subscribe(n=>{this.type=n||this.type,this.activeOut.emit({seatIndex:this.seatIndex,type:this.type})})}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(w.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-manager-seatchart-seat"]],inputs:{seatIndex:"seatIndex",showType:"showType",seatSetting:"seatSetting"},outputs:{activeOut:"activeOut"},decls:5,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","seat seat-free",3,"click",4,"ngIf"],["class","seat seat-sold",4,"ngIf"],["class","seat seat-free-show",4,"ngIf"],[1,"seat","seat-free",3,"click"],["src","assets/images/icon/no.svg","alt","no",1,"h-full","mx-auto"],[1,"seat","seat-sold"],[1,"seat","seat-free-show"],["src","assets/images/icon/handicapped.png","alt","handicapped",1,"h-full","mx-auto"],["class","seat seat-none",3,"click",4,"ngIf"],["class","seat seat-none",4,"ngIf"],[1,"seat","seat-none",3,"click"],[1,"seat","seat-none"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,rt,4,3,"ng-container",1),t.YNc(2,pt,4,3,"ng-container",1),t.YNc(3,mt,3,2,"ng-container",1),t.YNc(4,_t,4,3,"ng-container",2),t.qZA()),2&e&&(t.Q6J("ngSwitch",n.type),t.xp6(1),t.Q6J("ngSwitchCase","-1"),t.xp6(1),t.Q6J("ngSwitchCase","1"),t.xp6(1),t.Q6J("ngSwitchCase","N"))},dependencies:[g.O5,g.RF,g.n9,g.ED],styles:[".seat[_ngcontent-%COMP%]{height:1.75rem;width:100%;border-radius:.5rem .5rem .375rem .375rem;padding:.25rem}.seat-free[_ngcontent-%COMP%]{cursor:pointer;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.seat-free[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(148 163 184 / var(--tw-bg-opacity))}.seat-free-show[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.seat-lock[_ngcontent-%COMP%], .seat-sold[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity))}.seat-none[_ngcontent-%COMP%]{background-color:transparent}.active-seat[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity))}.step1-none[_ngcontent-%COMP%]{cursor:pointer;border-width:1px;--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity))}.step1-none[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}"]}),o})();function xt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"li",12)(1,"input",13),t.NdJ("input",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.convertToUpperCase())})("ngModelChange",function(a){const s=t.CHM(e).index,p=t.oxw(2);return t.KtG(p.rowsOrder[s]=a)})("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&o){const e=i.$implicit,n=i.index,a=t.oxw(2);t.xp6(1),t.s9C("value",e),t.Q6J("disabled",a.step!==a.Step.rank)("ngModel",a.rowsOrder[n])}}function Ct(o,i){if(1&o&&(t.TgZ(0,"ul"),t.YNc(1,xt,2,3,"li",11),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.rowsOrder)("ngForTrackBy",e.trackByIndex)}}function Tt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"li",17)(1,"app-manager-seatchart-seat",18),t.NdJ("activeOut",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.activeOut(a))}),t.qZA()()}if(2&o){const e=i.index,n=t.oxw().index,a=t.oxw(2);t.xp6(1),t.Q6J("seatIndex",n*a.colsArr.length+e)("seatSetting",a.seatSetting)("showType",a.responseArr[n*a.colsArr.length+e])}}function bt(o,i){if(1&o&&(t.TgZ(0,"li")(1,"ul",15),t.YNc(2,Tt,2,3,"li",16),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.colsArr)}}function wt(o,i){if(1&o&&(t.TgZ(0,"ul",9),t.YNc(1,bt,3,1,"li",14),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.rowsArr)}}function vt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"input",21,22),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).index,p=t.oxw(2);return t.KtG(p.colsOrder[s]=a)})("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&o){const e=i.$implicit,n=i.index,a=t.oxw(2);t.xp6(1),t.s9C("value",e),t.Q6J("disabled",a.step!==a.Step.rank)("ngModel",a.colsOrder[n])}}function Mt(o,i){if(1&o&&(t.TgZ(0,"ul",19),t.YNc(1,vt,3,3,"li",20),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.colsOrder)("ngForTrackBy",e.trackByIndex)}}let E=(()=>{class o{constructor(e){this.fb=e,this.Step=u,this.responseArr=[],this.rowsArr=[],this.colsArr=[],this.rowsOrder=[],this.colsOrder=[],this.lastType=!0,this.type=!0,this.step=u.createMap,this.fg=new t.vpe}ngOnInit(){this.validateForm=this.fb.group({seatMap:[],rowLabel:[],colLabel:[]}),this.fg.emit(this.validateForm)}setSeatChart(e,n,a){this.rowsArr=Array(n.length).fill("0"),this.colsArr=Array(a.length).fill("0"),this.responseArr=e,this.rowsOrder=n,this.colsOrder=a,this.validateForm.get("seatMap")?.patchValue(this.responseArr),this.validateForm.get("rowLabel")?.patchValue(this.rowsOrder),this.validateForm.get("colLabel")?.patchValue(this.colsOrder)}seatChartGenerator(e,n,a){console.log("seatChartGenerator"),this.responseArr=Array(n*e).fill("0"),this.rowsArr=Array(n).fill("0"),this.colsArr=Array(e).fill("0"),this.type=a,this.rowsOrder=this.createRowsOrder(n,a),this.colsOrder=this.createRowsOrder(e,!1),this.validateForm.get("seatMap")?.patchValue(this.responseArr),this.validateForm.get("rowLabel")?.patchValue(this.rowsOrder),this.validateForm.get("colLabel")?.patchValue(this.colsOrder)}setSeatSettingType(e){this.seatSetting=e}activeOut(e){this.responseArr[e.seatIndex]=e.type,console.log(e.seatIndex),console.log(this.responseArr),this.validateForm.get("seatMap")?.patchValue(this.responseArr),this.validateForm.get("rowLabel")?.patchValue(this.rowsOrder),this.validateForm.get("colLabel")?.patchValue(this.colsOrder)}trackByIndex(e,n){return e}convertToUpperCase(){for(let e=0;e<this.rowsOrder.length;e++)this.rowsOrder[e]=this.rowsOrder[e].toUpperCase()}selectAllText(){document.activeElement instanceof HTMLInputElement&&document.activeElement.select()}createRowsOrder(e,n){const a=[],r="A".charCodeAt(0);for(let s=0;s<e;s++){const p=n?String.fromCharCode(r+s):String(s+1);a.push(p)}return a}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-step2"]],inputs:{step:"step"},outputs:{fg:"fg"},decls:12,vars:5,consts:[[1,"max-w-full","mx-auto"],[1,"screen-border"],[1,"screen"],[1,"flex","w-full","p-5","pl-3","pb-0"],[4,"ngIf"],["class","flex-1",4,"ngIf"],[1,"flex","w-full","px-5","pl-3","mt-0.5","mb-3"],[1,"w-10"],[2,"display","none"],[1,"flex-1"],["class","flex justify-between",4,"ngIf"],["class","mx-1 my-0.5",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mx-1","my-0.5"],[1,"w-8","h-7","p-1","mb-1","flex","justify-center","items-center","text-center","row-rank",3,"disabled","value","ngModel","input","ngModelChange","click"],[4,"ngFor","ngForOf"],[1,"flex"],["class","m-0.5 flex-1",4,"ngFor","ngForOf"],[1,"m-0.5","flex-1"],[3,"seatIndex","seatSetting","showType","activeOut"],[1,"flex","justify-between"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-full","text-center","h-6","col-rank",3,"disabled","value","ngModel","ngModelChange","click"],["inputRef","ngModel"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div"),t._UZ(2,"div",1)(3,"div",2),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,Ct,2,2,"ul",4),t.YNc(6,wt,2,1,"ul",5),t.qZA(),t.TgZ(7,"div",6)(8,"div",7),t._UZ(9,"span",8),t.qZA(),t.TgZ(10,"div",9),t.YNc(11,Mt,2,2,"ul",10),t.qZA()()()),2&e&&(t.Udp("width",6*n.colsOrder.length+"%"),t.xp6(5),t.Q6J("ngIf",n.colsArr.length>0),t.xp6(1),t.Q6J("ngIf",n.step!==n.Step.createMap),t.xp6(5),t.Q6J("ngIf",n.rowsArr.length>0))},dependencies:[g.sg,g.O5,c.Fj,c.JJ,c.On,N],styles:[".screen-border[_ngcontent-%COMP%]{border-width:1px;border-color:#8988ff}.screen[_ngcontent-%COMP%]{width:100%;height:32px;background:linear-gradient(180deg,rgba(137,136,255,.2) 0%,rgba(103,101,238,0) 100%);flex:none;order:1;align-self:stretch;flex-grow:0}.row-rank[_ngcontent-%COMP%]{color:#9c6dff;border:1px solid #9C6DFF;background:#1A1A1A}.row-rank[_ngcontent-%COMP%]:disabled{border:0px;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity));background:unset}.col-rank[_ngcontent-%COMP%]{color:#71ddff;border:1px solid #71DDFF;font-size:60%;background:#1A1A1A}.col-rank[_ngcontent-%COMP%]:disabled{border:0px;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity));background:unset}"]}),o})();function yt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.handleOptionSelected(r))}),t._uU(1),t.qZA()}if(2&o){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(null==e?null:e.name)}}function Ot(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",5)(1,"button",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onPositiveClick("back"))}),t._UZ(2,"img",44),t.qZA(),t.TgZ(3,"div",45),t._uU(4,"\u4e0a\u4e00\u6b65"),t.qZA()()}}function At(o,i){1&o&&t._UZ(0,"div",5)}function Zt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",46),t._uU(2,"\u4e0b\u4e00\u6b65"),t.qZA(),t.TgZ(3,"button",47),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onPositiveClick("next"))}),t._UZ(4,"img",48),t.qZA()()}}function Pt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",5)(1,"button",49),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onPositiveClick("finish"))}),t._uU(2,"\u5b8c\u6210"),t.qZA()()}}const v=function(o){return{"active-step":o}};let L=(()=>{class o{constructor(e,n,a,r,s,p){this.commonAPIService=e,this.changeDetectorRef=n,this.theaterService=a,this.route=r,this.router=s,this.fb=p,this.isEdit=!1,this.Step=u,this.theaterId="",this.hintText="",this.btnText="\u7522\u751f\u5ea7\u4f4d\u5716",this.typeOptions=[],this.row=0,this.col=0,this.type=!0,this.step=u.createMap,this.selectedText="",this.seatMap=[],this.rowLabel=[],this.colLabel=[]}ngOnInit(){this.initForm(),this.isEdit="edit"===this.route.snapshot?.url[1]?.path,console.log("isEdit",this.isEdit,this.route.snapshot),this.getOptionAPI(2),this.isEdit?(this.theaterId=this.route.snapshot.params.id,this.getTheaterInfoAPI(),this.btnText="\u4fee\u6539\u57fa\u790e\u8cc7\u8a0a",this.formGroup.controls.rowType.disable(),this.formGroup.controls.row.disable(),this.formGroup.controls.col.disable()):this.formGroup.get("rowType")?.setValue(1)}ngAfterViewInit(){console.log(this.step2),this.changeDetectorRef.detectChanges()}handleChange(){this.inputRow=Math.ceil(this.inputRow),this.inputCol=Math.ceil(this.inputCol),this.inputName=Math.ceil(this.inputName)}initForm(){this.formGroup=this.fb.group({theaterName:["",[c.kI.required,c.kI.pattern("[0-9]*")]],theaterFloor:["",[c.kI.required]],theaterType:["",[c.kI.required]],row:["",[c.kI.required,c.kI.pattern("[0-9]*")]],col:["",[c.kI.required,c.kI.pattern("[0-9]*")]],rowType:[!0],step2:this.fb.group({})})}setForm(e){if(this.isEdit){const n=this.parseTheaterType(e.rowLabel),r={theaterName:e.name.match(/\d+/)?.[0],theaterFloor:e.floor,theaterType:e.type,row:e.row,col:e.col,rowType:n?1:0,step2:{seatMap:e.seatMap,rowLabel:e.rowLabel,colLabel:e.colLabel}};this.formGroup.patchValue(r)}this.changeDetectorRef.detectChanges(),console.log("formGroup- \u5e36\u503c",this.formGroup)}parseTheaterType(e){const n=e,a=n.filter(p=>/[A-Za-z]/.test(p)),r=n.filter(p=>/\d/.test(p));return a.length>r.length}addForm(e,n){this.formGroup.setControl(n,e)}onPositiveClick(e){switch(e){case"next":this.nextStep();break;case"back":this.lastStep();break;case"finish":this.finish()}}setHintText(){switch(this.step){case 3:this.hintText="\u203b\u9ede\u9078\u4ee5\u8a2d\u5b9a\u7279\u6b8a\u5ea7\u4f4d(ex:\u6b98\u969c\u5ea7\u4f4d)";break;case 2:this.hintText="\u203b\u6839\u64da\u5be6\u969b\u60c5\u6cc1\u8abf\u6574\u76f4\u6392\u3001\u6a6b\u6392\u7684\u6392\u865f";break;default:this.hintText="\u203b\u9ede\u9078\u4ee5\u8a2d\u5b9a\u975e\u5ea7\u4f4d\u5340(ex:\u8d70\u9053)"}}inputValidator(e,n,a){let r=!0;switch(e){case"name":this.formGroup.get("theaterName")?.value<n&&(r=!1);break;case"row":(this.formGroup.get("row")?.value<n||this.formGroup.get("row")?.value>a)&&(r=!1);break;case"col":(this.formGroup.get("col")?.value<n||this.formGroup.get("col")?.value>a)&&(r=!1)}return r}nextStep(){switch(this.step){case u.createMap:if(!this.inputValidator("name",1,-1))return void alert("\u5f71\u5ef3\u540d\u7a31\u9808\u70ba1\u4ee5\u4e0a");if(!this.inputValidator("row",5,15))return void alert("\u76f4\u6392\u683c\u6578\u9808\u4ecb\u65bc5~15\u4e4b\u9593");if(!this.inputValidator("col",5,35))return void alert("\u6a6b\u6392\u683c\u6578\u9808\u4ecb\u65bc5~35\u4e4b\u9593");if(this.formGroup.invalid)return void alert("\u8acb\u586b\u5beb\u6240\u6709\u6b04\u4f4d");if(this.isEdit)this.seatMap=this.formGroup.get("step2.seatMap")?.value,this.rowLabel=this.formGroup.get("step2.rowLabel")?.value,this.colLabel=this.formGroup.get("step2.colLabel")?.value,this.step2?.setSeatChart(this.seatMap,this.rowLabel,this.colLabel);else{const e=this.formGroup.get("row")?.value,n=this.formGroup.get("col")?.value,a=this.formGroup.get("rowType")?.value;this.step2?.seatChartGenerator(n,e,a)}this.step2?.setSeatSettingType(m.showOrNot),this.formGroup.disable(),this.step++;break;case u.seatMapSetting:this.step2?.setSeatSettingType(m.disable),this.step++;break;case u.rank:this.step2?.setSeatSettingType(m.seatType),this.step++;break;case u.seatTypeSetting:this.step2?.setSeatSettingType(m.disable)}this.setHintText()}lastStep(){switch(this.step--,this.setHintText(),this.step){case u.createMap:this.formGroup.enable(),this.isEdit&&(this.formGroup.controls.rowType.disable(),this.formGroup.controls.row.disable(),this.formGroup.controls.col.disable()),this.step2?.setSeatSettingType(m.disable);break;case u.seatMapSetting:this.step2?.setSeatSettingType(m.showOrNot);break;case u.rank:this.step2?.setSeatSettingType(m.disable);break;case u.seatTypeSetting:this.step2?.setSeatSettingType(m.seatType)}}handleOptionSelected(e){this.selectedText=e?.name}getSeatMapResult(e){this.seatMap=e.seatMap,this.rowLabel=e.rowLabel,this.colLabel=e.colLabel}finish(){console.log("=== get result ===");const e=this.formGroup.getRawValue();console.log(e);let n=0,a=0;for(const s of e.step2.seatMap)"N"!=s&&n++,"1"===s&&a++;let r={name:"\u7b2c"+e.theaterName+"\u5ef3",type:e.theaterType,floor:e.theaterFloor,totalCapacity:n,wheelChairCapacity:a,row:e.row,col:e.col,rowLabel:e.step2.rowLabel,colLabel:e.step2.colLabel,seatMap:e.step2.seatMap};this.isEdit?this.patchUpdateTheaterAPI(r):(r={...r,status:0},this.postCreateTheaterAPI(r))}getOptionAPI(e){this.commonAPIService.getOption(e).subscribe(n=>{console.log(e,"\u53d6\u5f97\u9078\u9805\u8cc7\u6599-\u6210\u529fres",n),this.typeOptions=n.data,this.changeDetectorRef.detectChanges()})}getTheaterInfoAPI(){setTimeout(()=>{this.theaterService.getTheaterInfo(this.theaterId).subscribe(e=>{console.log(e),this.changeDetectorRef.detectChanges(),this.setForm(e.data),this.nextStep()})})}postCreateTheaterAPI(e){this.theaterService.createTheater(e).subscribe(n=>{console.log("\u65b0\u589e\u5f71\u5ef3\u8cc7\u8a0a-\u6210\u529fres",n),this.router.navigate([d.F.THEATER,n.data.theater._id]),alert(n.message)})}patchUpdateTheaterAPI(e){this.theaterService.updateTheater(this.theaterId,e).subscribe(n=>{console.log("\u66f4\u65b0\u5f71\u5ef3\u8cc7\u8a0a-\u6210\u529fres",n),this.router.navigate([d.F.THEATER,this.theaterId]),alert(n.message)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.a),t.Y36(t.sBO),t.Y36(M),t.Y36(h.gz),t.Y36(h.F0),t.Y36(c.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-theater-detail-page"]],viewQuery:function(e,n){if(1&e&&t.Gf(E,5),2&e){let a;t.iGM(a=t.CRH())&&(n.step2=a.first)}},decls:110,vars:33,consts:[[1,"flex-container","px-[20px]"],[1,"table"],[1,"text-row",3,"ngClass"],[1,"text"],[1,"underline"],[1,"flex-container"],[1,"w-[30%]","px-[20px]"],[1,"wrapper-page","form-common-back","utility-common-back",3,"formGroup"],[1,"mb-[30px]"],[2,"font-size","14px"],[1,"row"],[1,"form-title"],[1,"main-box","form-content"],[1,"showText"],["type","number","min","1","formControlName","theaterName",1,"form-input","w-[70%]","text-center",3,"ngModel","ngModelChange","input"],[1,"form-content"],[1,"form-select","select-small"],["appearance","fill"],["placeholder","\u8acb\u9078\u64c7","formControlName","theaterFloor"],[3,"value"],[1,"form-select"],["placeholder","\u8acb\u9078\u64c7","formControlName","theaterType"],[3,"value","click",4,"ngFor","ngForOf"],[1,"mt-[30px]",2,"font-size","14px"],[1,"text-right"],[1,"form-content","ml-[20px]",2,"display","flex"],[1,"form-radio","list-row","text-[13px]"],["aria-label","Select an option","formControlName","rowType"],[1,"mr-[25px]",3,"value"],["type","number","min","5","formControlName","row",1,"form-input",3,"ngModel","ngModelChange","input"],["type","number","min","5","formControlName","col",1,"form-input",3,"ngModel","ngModelChange","input"],[1,"flex",2,"justify-content","right"],["mat-raised-button","","color","primary","type","submit",1,"w-2/3",3,"disabled","click"],[1,"w-[70%]","pr-[20px]",3,"hidden"],[1,"wrapper-page","form-common-back","utility-common-back"],[1,"text-center","mb-[30px]",2,"font-size","14px"],[3,"step","fg"],[1,"w-fill"],[1,"px-[20px]"],[3,"ngIf","ngIfElse"],["showBlank",""],["class","flex-container",4,"ngIf"],[3,"value","click"],["mat-raised-button","","color","accent",1,"secondary","btn-icon","mr-[10px]",3,"click"],["src","assets/images/icon/arrowR.svg","alt","arrow"],[1,"mt-[10px]","ml-[8px]"],[1,"mt-[10px]","mr-[8px]"],["mat-raised-button","","color","primary",1,"secondary","btn-icon","mr-[10px]",3,"click"],["src","assets/images/icon/arrowL.svg","alt","arrow"],["mat-raised-button","","color","primary","type","submit",1,"w-1/6",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"table",1)(2,"tr")(3,"td")(4,"div",2)(5,"div",3),t._uU(6),t.qZA(),t._UZ(7,"div",4),t.qZA()(),t.TgZ(8,"td")(9,"div",2)(10,"div",3),t._uU(11,"2 \u8a2d\u5b9a\u975e\u5ea7\u4f4d\u5340"),t.qZA(),t._UZ(12,"div",4),t.qZA()(),t.TgZ(13,"td")(14,"div",2)(15,"div",3),t._uU(16,"3 \u8abf\u6574\u6392\u865f"),t.qZA(),t._UZ(17,"div",4),t.qZA()(),t.TgZ(18,"td")(19,"div",2)(20,"div",3),t._uU(21,"4 \u8a2d\u5b9a\u7279\u6b8a\u5ea7\u4f4d"),t.qZA(),t._UZ(22,"div",4),t.qZA()()()()(),t.TgZ(23,"div",5)(24,"section",6)(25,"div",7)(26,"cine-card",8)(27,"cine-card-header",9),t._uU(28,"\u57fa\u790e\u8cc7\u8a0a"),t.qZA(),t.TgZ(29,"cine-card-content")(30,"div",10)(31,"span",11),t._uU(32,"\u540d\u7a31"),t.qZA(),t.TgZ(33,"div",12)(34,"div",13),t._uU(35,"\u7b2c"),t.qZA(),t.TgZ(36,"input",14),t.NdJ("ngModelChange",function(r){return n.inputName=r})("input",function(){return n.handleChange()}),t.qZA(),t.TgZ(37,"div",13),t._uU(38,"\u5ef3"),t.qZA()()(),t.TgZ(39,"div",10)(40,"span",11),t._uU(41,"\u6a13\u5c64"),t.qZA(),t.TgZ(42,"div",15)(43,"div",16)(44,"mat-form-field",17)(45,"mat-label"),t._uU(46,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(47,"mat-select",18)(48,"mat-option",19),t._uU(49,"1F"),t.qZA(),t.TgZ(50,"mat-option",19),t._uU(51,"2F"),t.qZA(),t.TgZ(52,"mat-option",19),t._uU(53,"3F"),t.qZA(),t.TgZ(54,"mat-option",19),t._uU(55,"4F"),t.qZA()()()()()(),t.TgZ(56,"div",10)(57,"span",11),t._uU(58,"\u985e\u578b"),t.qZA(),t.TgZ(59,"div",15)(60,"div",20)(61,"mat-form-field",17)(62,"mat-label"),t._uU(63,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(64,"mat-select",21),t.YNc(65,yt,2,2,"mat-option",22),t.qZA()()()()(),t.TgZ(66,"cine-card-header",23)(67,"div",5)(68,"div"),t._uU(69," \u5ea7\u4f4d\u6578\u91cf "),t.qZA(),t.TgZ(70,"div",24),t._uU(71," \u203b\u8d70\u9053\u4e5f\u7b971\u884c/\u5217 "),t.qZA()()(),t.TgZ(72,"div",10)(73,"span",11),t._uU(74,"\u76f4\u6392\u724c\u865f"),t.qZA(),t.TgZ(75,"div",25)(76,"div",26)(77,"mat-radio-group",27)(78,"mat-radio-button",28),t._uU(79,"A ~ Z"),t.qZA(),t.TgZ(80,"mat-radio-button",28),t._uU(81,"1, 2, 3..."),t.qZA()()()()(),t.TgZ(82,"div",10)(83,"span",11),t._uU(84,"\u76f4\u6392\u683c\u6578"),t.qZA(),t.TgZ(85,"div",15)(86,"input",29),t.NdJ("ngModelChange",function(r){return n.inputRow=r})("input",function(){return n.handleChange()}),t.qZA()()(),t.TgZ(87,"div",10)(88,"span",11),t._uU(89,"\u6a6b\u6392\u683c\u6578"),t.qZA(),t.TgZ(90,"div",15)(91,"input",30),t.NdJ("ngModelChange",function(r){return n.inputCol=r})("input",function(){return n.handleChange()}),t.qZA()()(),t.TgZ(92,"div",31)(93,"button",32),t.NdJ("click",function(){return n.onPositiveClick("next")}),t._uU(94),t.qZA()()()()()(),t.TgZ(95,"section",33)(96,"div",34)(97,"cine-card",8)(98,"cine-card-header",35),t._uU(99),t.qZA(),t.TgZ(100,"cine-card-content")(101,"app-step2",36),t.NdJ("fg",function(r){return n.addForm(r,"step2")}),t.qZA()()()()()(),t.TgZ(102,"div",37)(103,"section",38)(104,"div",5),t.YNc(105,Ot,5,0,"ng-template",39),t.YNc(106,At,1,0,"ng-template",null,40,t.W1O),t.YNc(108,Zt,5,0,"div",41),t.YNc(109,Pt,3,0,"div",41),t.qZA()()()),2&e){const a=t.MAs(107);t.xp6(4),t.Q6J("ngClass",t.VKq(25,v,0===n.step)),t.xp6(2),t.hij("1 ",n.btnText,""),t.xp6(3),t.Q6J("ngClass",t.VKq(27,v,1===n.step)),t.xp6(5),t.Q6J("ngClass",t.VKq(29,v,2===n.step)),t.xp6(5),t.Q6J("ngClass",t.VKq(31,v,3===n.step)),t.xp6(6),t.Q6J("formGroup",n.formGroup),t.xp6(11),t.Q6J("ngModel",n.inputName),t.xp6(12),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4),t.xp6(11),t.Q6J("ngForOf",n.typeOptions),t.xp6(13),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0),t.xp6(6),t.Q6J("ngModel",n.inputRow),t.xp6(5),t.Q6J("ngModel",n.inputCol),t.xp6(2),t.Q6J("disabled",n.step!==n.Step.createMap),t.xp6(1),t.Oqu(n.btnText),t.xp6(1),t.Q6J("hidden",n.step===n.Step.createMap),t.xp6(4),t.Oqu(n.hintText),t.xp6(2),t.Q6J("step",n.step),t.xp6(4),t.Q6J("ngIf",n.step>n.Step.createMap)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",n.step<n.Step.seatTypeSetting&&n.step!==n.Step.createMap),t.xp6(1),t.Q6J("ngIf",n.step===n.Step.seatTypeSetting)}},dependencies:[g.mk,g.sg,g.O5,c.Fj,c.wV,c.JJ,c.JL,c.qQ,c.sg,c.u,x.VQ,x.U0,b.KE,b.hX,y.gD,C.ey,O.lW,A.A,Z.g,q.n,E],styles:['@charset "UTF-8";.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:20px}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{width:20%;font-weight:400;font-size:13px;color:#ddd}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{width:80%;min-height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{height:48px;padding:16px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-input.input-textarea[_ngcontent-%COMP%]{height:200px!important;width:100%!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field{font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex{padding:16px 12px!important;padding-bottom:12px;border-radius:16px!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0;border-top:0}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select-arrow-wrapper{margin-top:10px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrappe{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted.mat-form-field-empty.mat-empty{display:inline-block!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container{height:15px;width:15px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle, .utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{border-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle{height:15px;width:15px;border-width:1px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{height:15px;width:15px;background-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio.list-row[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:row;align-items:center}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]   .list-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.utility-common-back[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{border-top:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{border-top:0!important;display:flex;align-items:center;height:48px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0 12px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{margin-right:5px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-underline, .utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-subscript-wrapper{display:none}.utility-common-back[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:6px 12px;letter-spacing:.1em;text-align:center;font-weight:500;font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .btn.gray[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);color:#ffffff80}.utility-common-back[_ngcontent-%COMP%]   .btn.small[_ngcontent-%COMP%]{border-radius:4px;height:30px}.utility-common-back[_ngcontent-%COMP%]   .btn.medium[_ngcontent-%COMP%]{border-radius:6px;height:42px}.form-title[_ngcontent-%COMP%]{width:25%!important}.form-content[_ngcontent-%COMP%]{margin-left:10px}.form-text[_ngcontent-%COMP%]{font-size:15px!important;margin-left:16px}.flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.form-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#ffffff0d}.main-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.main-box[_ngcontent-%COMP%]   .showText[_ngcontent-%COMP%]{font-size:15px;margin-bottom:0;padding-top:15px}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:32px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:25%;padding:15px 10px 0}.text-row[_ngcontent-%COMP%]{position:relative}.text[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#dddddd80;display:inline-block;padding-bottom:10px}.underline[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;width:100%;height:2px;background-color:#dddddd80}.active-step[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:transparent;background-image:linear-gradient(90deg,#9C6DFF 0%,#71DDFF 100%);-webkit-background-clip:text;background-clip:text}.active-step[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#9C6DFF 0%,#71DDFF 100%)}']}),o})();function St(o,i){if(1&o&&(t.TgZ(0,"li",11)(1,"div",12),t._uU(2),t.qZA()()),2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e)}}function kt(o,i){if(1&o&&(t.TgZ(0,"ul"),t.YNc(1,St,3,1,"li",10),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.rowsOrder)}}function Ft(o,i){if(1&o&&t.YNc(0,kt,2,1,"ul",9),2&o){const e=t.oxw();t.Q6J("ngIf",e.colsArr.length>0)}}function It(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"li",14)(1,"input",15,16),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).index,p=t.oxw(3);return t.KtG(p.rowsOrder[s]=a)})("input",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.convertToUpperCase())})("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&o){const e=i.$implicit,n=i.index,a=t.oxw(3);t.xp6(1),t.s9C("value",e),t.Q6J("ngModel",a.rowsOrder[n])}}function Dt(o,i){if(1&o&&(t.TgZ(0,"ul"),t.YNc(1,It,3,2,"li",13),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.rowsOrder)("ngForTrackBy",e.trackByIndex)}}function Ut(o,i){if(1&o&&t.YNc(0,Dt,2,2,"ul",9),2&o){const e=t.oxw();t.Q6J("ngIf",e.colsArr.length>0)}}function qt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"li",19)(1,"app-manager-seatchart-seat",20),t.NdJ("activeOut",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.activeOut(a))}),t.qZA()()}if(2&o){const e=i.index,n=t.oxw().index,a=t.oxw();t.xp6(1),t.Q6J("seatIndex",n*a.cols+e)("seatSetting",a.seatSetting)("showType",a.responseArr[n*a.cols+e])}}function Jt(o,i){if(1&o&&(t.TgZ(0,"li")(1,"ul",17),t.YNc(2,qt,2,3,"li",18),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.colsArr)}}function Nt(o,i){if(1&o&&(t.TgZ(0,"li",27),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e," ")}}function Et(o,i){if(1&o&&(t.TgZ(0,"ul",25),t.YNc(1,Nt,2,1,"li",26),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.colsOrder)}}function Lt(o,i){if(1&o&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"span",23),t.qZA(),t.TgZ(3,"div",6),t.YNc(4,Et,2,1,"ul",24),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.rowsArr.length>0)}}function Qt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"input",29,16),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).index,p=t.oxw(3);return t.KtG(p.colsOrder[s]=a)})("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&o){const e=i.$implicit,n=i.index,a=t.oxw(3);t.xp6(1),t.s9C("value",e),t.Q6J("ngModel",a.colsOrder[n])}}function Bt(o,i){if(1&o&&(t.TgZ(0,"ul",25),t.YNc(1,Qt,3,2,"li",28),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.colsOrder)("ngForTrackBy",e.trackByIndex)}}function Gt(o,i){if(1&o&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"span",23),t.qZA(),t.TgZ(3,"div",6),t.YNc(4,Bt,2,2,"ul",24),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.rowsArr.length>0)}}let Yt=(()=>{class o{constructor(){this.responseArr=[],this.rowsArr=[],this.colsArr=[],this.rowsOrder=[],this.colsOrder=[],this.lastType=!0,this.cols=0,this.rows=0,this.isPreview=!1,this.getViewData={seatMap:[],rowLabel:[],colLabel:[]},this.type=!0,this.step=1,this.seatMapResult=new t.vpe}ngOnInit(){this.createSeat(this.rows,this.cols),(0===this.rowsOrder.length||this.rowsOrder.length!=this.rows||this.lastType!=this.type)&&(this.rowsOrder=this.createRowsOrder(this.rows,this.type),this.lastType=this.type),(0===this.colsOrder.length||this.colsOrder.length!=this.cols)&&(this.colsOrder=this.createRowsOrder(this.cols,!1)),this.isPreview&&(console.log(this.getViewData),this.responseArr=this.getViewData.seatMap,this.rowsOrder=this.getViewData.rowLabel,this.colsOrder=this.getViewData.colLabel,this.seatSetting=4)}ngOnChanges(){this.createSeat(this.rows,this.cols),(0===this.rowsOrder.length||this.rowsOrder.length!=this.rows||this.lastType!=this.type)&&(this.rowsOrder=this.createRowsOrder(this.rows,this.type),this.lastType=this.type),(0===this.colsOrder.length||this.colsOrder.length!=this.cols)&&(this.colsOrder=this.createRowsOrder(this.cols,!1)),this.isPreview&&(console.log(this.getViewData),this.responseArr=this.getViewData.seatMap,this.rowsOrder=this.getViewData.rowLabel,this.colsOrder=this.getViewData.colLabel,this.seatSetting=4)}trackByIndex(e,n){return e}convertToUpperCase(){for(let e=0;e<this.rowsOrder.length;e++)this.rowsOrder[e]=this.rowsOrder[e].toUpperCase()}selectAllText(){document.activeElement instanceof HTMLInputElement&&document.activeElement.select()}activeOut(e){this.responseArr[e.seatIndex]=e.type,console.log("activeOut"),console.log(this.responseArr);const n=JSON.parse(JSON.stringify({seatMap:this.responseArr,rowLabel:this.rowsOrder,colLabel:this.colsOrder}));this.seatMapResult.emit(n)}createSeat(e,n){this.responseArr=Array(e*n).fill("0"),this.rowsArr=Array(e).fill("0"),this.colsArr=Array(n).fill("0")}createRowsOrder(e,n){const a=[],r="A".charCodeAt(0);for(let s=0;s<e;s++){const p=n?String.fromCharCode(r+s):String(s+1);a.push(p)}return a}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-manager-seatchart"]],inputs:{cols:"cols",rows:"rows",isPreview:"isPreview",getViewData:"getViewData",type:"type",step:"step"},outputs:{seatMapResult:"seatMapResult"},features:[t.TTD],decls:13,vars:7,consts:[[1,"max-w-full","mx-auto"],[1,"screen-border"],[1,"screen"],[1,"flex","w-full","p-5","pl-3","pb-0"],[3,"ngIf","ngIfElse"],["canEditRow",""],[1,"flex-1"],[4,"ngFor","ngForOf"],["canEditCol",""],[4,"ngIf"],["class","mx-1 my-0.5",4,"ngFor","ngForOf"],[1,"mx-1","my-0.5"],[1,"w-8","h-7","p-1","mb-1","text-gray-400","flex","justify-center","items-center","text-center","row-rank"],["class","mx-3 my-0.5",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mx-3","my-0.5"],[1,"text-input","w-8","h-7","p-1","mb-1","flex","justify-center","items-center","text-center",2,"color","#9C6DFF","border","1px solid #9C6DFF",3,"value","ngModel","ngModelChange","input","click"],["inputRef","ngModel"],[1,"flex"],["class","m-0.5 flex-1",4,"ngFor","ngForOf"],[1,"m-0.5","flex-1"],[3,"seatIndex","seatSetting","showType","activeOut"],[1,"flex","w-full","px-5","pl-3","mt-0.5","mb-3"],[1,"w-10"],[2,"display","none"],["class","flex justify-between",4,"ngIf"],[1,"flex","justify-between"],["class","w-full text-center text-gray-400","style","font-size: 20%;",4,"ngFor","ngForOf"],[1,"w-full","text-center","text-gray-400",2,"font-size","20%"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-input","w-full","text-center","h-6",2,"color","#71DDFF","border","1px solid #71DDFF","font-size","60%",3,"value","ngModel","ngModelChange","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"section",0)(1,"div"),t._UZ(2,"div",1)(3,"div",2),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,Ft,1,1,"ng-template",4),t.YNc(6,Ut,1,1,"ng-template",null,5,t.W1O),t.TgZ(8,"ul",6),t.YNc(9,Jt,3,1,"li",7),t.qZA()(),t.YNc(10,Lt,5,1,"ng-template",4),t.YNc(11,Gt,5,1,"ng-template",null,8,t.W1O),t.qZA()),2&e){const a=t.MAs(7),r=t.MAs(12);t.Udp("width",4.22*n.colsOrder.length+"%"),t.xp6(5),t.Q6J("ngIf",2!=n.step)("ngIfElse",a),t.xp6(4),t.Q6J("ngForOf",n.rowsArr),t.xp6(1),t.Q6J("ngIf",2!=n.step)("ngIfElse",r)}},dependencies:[g.sg,g.O5,c.Fj,c.JJ,c.On,N],styles:[".screen-border[_ngcontent-%COMP%]{border-width:1px;border-color:#8988ff}.screen[_ngcontent-%COMP%]{width:100%;height:32px;background:linear-gradient(180deg,rgba(137,136,255,.2) 0%,rgba(103,101,238,0) 100%);flex:none;order:1;align-self:stretch;flex-grow:0}.text-input[_ngcontent-%COMP%]{background:#1A1A1A}"]}),o})();const Rt=[{path:"",children:[{path:"",component:J},{path:`${d.F.DETAIL}/${d.F.CREATE}`,component:L},{path:":id",component:(()=>{class o{constructor(e,n){this.route=e,this.theaterService=n,this.theaterId="",this.rows=0,this.cols=0,this.getViewData={seatMap:[],rowLabel:[],colLabel:[]},this.theaterTypes={1:"2D",2:"3D",3:"IMAX",4:"4DX"}}ngOnInit(){this.theaterId=this.route.snapshot.params.id,this.getTheaterInfo(this.theaterId)}getTheaterInfo(e){setTimeout(()=>{this.theaterService.getTheaterInfo(e).subscribe(n=>{console.log(n),this.theaterData=n.data,this.rows=n.data.row,this.cols=n.data.col,this.getViewData.rowLabel=n.data.rowLabel,this.getViewData.colLabel=n.data.colLabel,this.getViewData.seatMap=n.data.seatMap})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.gz),t.Y36(M))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-theater-view-page"]],decls:35,vars:9,consts:[[1,"wrapper-page"],[1,"card-wrap","px-[15px]"],[1,"main-box"],[1,"main-card"],[1,"showBox"],[1,"showText"],[3,"rows","cols","getViewData","isPreview"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"cine-card",1)(2,"cine-card-content")(3,"div",2)(4,"div",3)(5,"span"),t._uU(6,"\u540d\u7a31"),t.qZA(),t.TgZ(7,"div",4)(8,"span",5),t._uU(9),t.qZA()()(),t.TgZ(10,"div",3)(11,"span"),t._uU(12,"\u6a13\u5c64"),t.qZA(),t.TgZ(13,"div",4)(14,"span",5),t._uU(15),t.qZA()()(),t.TgZ(16,"div",3)(17,"span"),t._uU(18,"\u985e\u578b"),t.qZA(),t.TgZ(19,"div",4)(20,"span",5),t._uU(21),t.qZA()()(),t.TgZ(22,"div",3)(23,"span"),t._uU(24,"\u5e2d\u6b21"),t.qZA(),t.TgZ(25,"div",4)(26,"span",5),t._uU(27),t.qZA()()(),t.TgZ(28,"div",3)(29,"span"),t._uU(30,"\u7121\u969c\u7919\u5e2d\u6b21"),t.qZA(),t.TgZ(31,"div",4)(32,"span",5),t._uU(33),t.qZA()()()(),t._UZ(34,"app-manager-seatchart",6),t.qZA()()()),2&e&&(t.xp6(9),t.Oqu(null==n.theaterData?null:n.theaterData.name),t.xp6(6),t.hij("",null==n.theaterData?null:n.theaterData.floor,"F"),t.xp6(6),t.Oqu(n.theaterTypes[null==n.theaterData?null:n.theaterData.type]),t.xp6(6),t.Oqu(null==n.theaterData?null:n.theaterData.totalCapacity),t.xp6(6),t.Oqu(null==n.theaterData?null:n.theaterData.wheelChairCapacity),t.xp6(1),t.Q6J("rows",n.rows)("cols",n.cols)("getViewData",n.getViewData)("isPreview",!0))},dependencies:[A.A,Z.g,Yt],styles:[".wrapper-page[_ngcontent-%COMP%]{margin:0 30px 100px!important}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]{margin-bottom:50px!important}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]{padding:0 30px;display:flex;flex-direction:row;justify-content:space-between;margin-bottom:50px}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .main-card[_ngcontent-%COMP%]   .showBox[_ngcontent-%COMP%]{margin-top:10px;border:rgba(255,255,255,.3) 1px solid;border-radius:12px;text-align:center}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .main-card[_ngcontent-%COMP%]   .showBox[_ngcontent-%COMP%]   .showText[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#a7e8ff;margin-bottom:0;padding:15px}"]}),o})()},{path:`${d.F.DETAIL}/${d.F.EDIT}/:id`,component:L},{path:`${d.F.LIST}`,component:J}]}];let Ht=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.Bz.forChild(Rt),h.Bz]}),o})();var zt=l(4144),Kt=l(9602),jt=l(4011),$t=l(3687);let Xt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,c.u5,w.Is]}),o})();var Wt=l(5444);let te=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,c.UX,c.u5,Ht,I.Ps,x.Fk,y.LD,H,Kt.FA,C.XK,zt.c,O.ot,U.TU,jt.d,$t.U,Xt,Wt.V]}),o})()}}]);